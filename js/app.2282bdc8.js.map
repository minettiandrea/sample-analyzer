{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?9b05","webpack:///./src/services/spectral-extractor/essentia-spectral-extractor.ts","webpack:///./src/services/sample-loader/sample-loader-impl.ts","webpack:///./src/ioc/registry.ts","webpack:///./src/ioc sync ^\\.\\/inversify\\..*\\.config$","webpack:///./src/components/rhythm/WaveformPresenter.vue?f89a","webpack:///./src/assets/drums.wav","webpack:///./src/services/providers/quantizer.ts","webpack:///./src/components/harmony/HPCPPresenter.vue?8277","webpack:///./node_modules/moment/locale sync ^\\.\\/.*$","webpack:///./src/services/store/store.ts","webpack:///./src/ioc/inversify.development.config.ts","webpack:///./src/services/time-extractor/essentia-time-extractor.ts","webpack:///./src/assets/amen.wav","webpack:///./src/workers/essentia.ts","webpack:///./src/workers/essentia-message.ts","webpack:///./src/assets/cello.wav","webpack:///./src/ioc/index.ts","webpack:///./src/assets/rhodes.wav","webpack:///./src/App.vue?cb2e","webpack:///./src/components/sidebar/SampleLoader.vue?3b66","webpack:///./src/components/sidebar/SampleLoader.vue?5ddb","webpack:///./src/components/sidebar/SampleLoader.vue?f05f","webpack:///./src/components/sidebar/SampleLoader.vue","webpack:///./src/components/harmony/HarmonicStructure.vue?c630","webpack:///./src/components/harmony/SpectrumPresenter.vue?a719","webpack:///./src/drawables/freqBox.ts","webpack:///./src/drawables/utils/logUtils.ts","webpack:///./src/drawables/spectra.ts","webpack:///./src/drawables/axis.ts","webpack:///./src/drawables/line.ts","webpack:///./src/components/harmony/SpectrumPresenter.vue?c3a7","webpack:///./src/components/harmony/SpectrumPresenter.vue?6f2a","webpack:///./src/components/harmony/SpectrumPresenter.vue","webpack:///./src/components/harmony/OvertonesPresenter.vue?64b1","webpack:///./src/components/harmony/OvertonesPresenter.vue?5fac","webpack:///./src/components/harmony/OvertonesPresenter.vue?d843","webpack:///./src/components/harmony/OvertonesPresenter.vue","webpack:///./src/components/harmony/VoicingsPresenter.vue?ef43","webpack:///./src/components/harmony/VoicingsPresenter.vue?b94f","webpack:///./src/components/harmony/VoicingsPresenter.vue?b4e5","webpack:///./src/components/harmony/VoicingsPresenter.vue","webpack:///./src/components/harmony/HPCPPresenter.vue?3290","webpack:///./src/components/harmony/HPCPPresenter.vue?f2a2","webpack:///./src/components/harmony/HPCPPresenter.vue?c8a8","webpack:///./src/components/harmony/HPCPPresenter.vue","webpack:///./src/components/harmony/HarmonicStructure.vue?6990","webpack:///./src/components/harmony/HarmonicStructure.vue?7522","webpack:///./src/components/harmony/HarmonicStructure.vue","webpack:///./src/components/rhythm/RhythmicStructure.vue?115f","webpack:///./src/components/rhythm/WaveformPresenter.vue?1961","webpack:///./src/components/rhythm/AudioPlayer.vue?eabd","webpack:///./src/components/rhythm/AudioPlayer.vue?6729","webpack:///./src/components/rhythm/AudioPlayer.vue?521d","webpack:///./src/components/rhythm/AudioPlayer.vue","webpack:///./src/components/rhythm/Legend.vue?228d","webpack:///./src/components/rhythm/Legend.vue?8754","webpack:///./src/components/rhythm/Legend.vue?1f1f","webpack:///./src/components/rhythm/Legend.vue","webpack:///./src/drawables/waveform.ts","webpack:///./src/components/rhythm/WaveformPresenter.vue?dbc3","webpack:///./src/components/rhythm/WaveformPresenter.vue?b9ac","webpack:///./src/components/rhythm/WaveformPresenter.vue","webpack:///./src/components/rhythm/SchemaPresenter.vue?d1f8","webpack:///./src/components/rhythm/SchemaPresenter.vue?be78","webpack:///./src/components/rhythm/SchemaPresenter.vue?75d5","webpack:///./src/components/rhythm/SchemaPresenter.vue","webpack:///./src/components/rhythm/SignaturesPresenter.vue?d123","webpack:///./src/components/rhythm/SignaturesPresenter.vue?d865","webpack:///./src/components/rhythm/SignaturesPresenter.vue?b15b","webpack:///./src/components/rhythm/SignaturesPresenter.vue","webpack:///./src/components/rhythm/RhythmicStructure.vue?a457","webpack:///./src/components/rhythm/RhythmicStructure.vue?fc52","webpack:///./src/components/rhythm/RhythmicStructure.vue","webpack:///./src/App.vue?ec60","webpack:///./src/App.vue?640d","webpack:///./src/App.vue","webpack:///./src/plugins/vuetify.ts","webpack:///./src/main.ts","webpack:///./src/model/note.ts","webpack:///./src/components/harmony/SpectrumPresenter.vue?9321","webpack:///./src/services/providers/draw-toolkit.ts","webpack:///./src/services/providers/fft.ts","webpack:///./src/services/providers/context-provider.ts","webpack:///./src/services/providers/note-frequency.ts","webpack:///./src/ioc/inversify.production.config.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","EssentiaSpectralExtractor","sample","Promise","resolve","reject","worker","msg","HARMONY","postMessage","onmessage","event","isForMe","payload","max","Math","min","forEach","a","Float32Array","from","SampleLoaderImpl","url","fetch","then","response","arrayBuffer","buffer","context","decodeAudioData","audioBuffer","file","fr","FileReader","readAsArrayBuffer","onload","createBuffer","AudioContextProvider","REGISTRY","SpectralExtractor","for","TimeExtractor","NoteFrequencyProvider","SampleLoader","Store","DrawToolkit","Quantizer","FFT","map","webpackContext","req","id","webpackContextResolve","e","Error","code","keys","QuantizerImpl","array","bars","blocksize","floor","dataf","blockbegins","sum","abs","factor","StoreImpl","_sample","_timeAnalisis","emptySampleEvent","status","elapsed","_playing","this","_skipped","_polyAdded","_spectralpeaks","_hpcp","_fft","_loading","channel","getChannelData","b","numberOfChannels","_channelData","next","fft","of","spectrum","full","x","magnitude","frequency","sampleRate","spectralExtractor","analyze","subsampled","se","peaks","frequencies","hpcp","extractor","pe","skipped","PreLoadedStore","cello","sampleLoader","loadFromUrl","nextSample","addSingleton","EssentiaTimeExtractor","RHYTHM","normalize","Array","pos","start","end","envelope","attackSlope","decaySlope","Worker","EssentiaMessage","type","ID","random","toString","substr","reply","setID","message","clonedMessage","SPECTRUM","env","default","_vm","_h","$createElement","_c","_self","attrs","isLoading","on","$event","model","callback","$$v","drawer","expression","stopPropagation","_v","_l","tab","currentTab","_s","staticRenderFns","staticClass","load","item","domProps","selectSample","examples","store","sampleExamples","setLoading","ab","loadFromFile","component","ref","hover","hide","drawSpectrum","log","maxFreq","minFreq","scopedSlots","_u","fn","staticStyle","freqRange","$set","proxy","freq","amplitude","xpos","ypos","visible","ctx","canvas","font","width","fillText","virtualCanvas","canvasWidth","offsetX","offset","translate","height","maxin","minin","maxout","minout","scaled","padding","nblocks","minFreqIndex","findIndex","sizing","y","log10","lineWidth","strokeStyle","beginPath","moveTo","lineTo","stroke","q","textFreq","graphicFreq","offsetHeight","widthpx","minDelta","idx","offsetWidth","strokeText","color","posx","sampleON","mainPanel","drawtoolkit","setUp","canvasspec","infoPanel","canvashov","mouseHandler","subscribe","reset","getFFT","pipe","find","originalFFT","getSpectralPeaks","sp","spectralPeaks","freqBox","add","filteredFFT","filter","spectra","axis","redraw","peak","xbin","wrapperSpectrum","addEventListener","onMouseMove","offsetY","f","exp","toFixed","HTMLCanvasElement","HTMLDivElement","renderer","Renderer","score","Backends","SVG","resize","freshSVG","clear","notes","notemgt","freqToNote","drawTones","notesBASS","notesTREBLE","notesALTO","oct","substring","val","myclef","clefS","vexn","clefRef","StaveNote","clef","duration","voiceB","Voice","num_beats","beat_value","setMode","addTickables","voiceT","voiceA","Formatter","format","draw","BASS","TREBLE","ALTO","getContext","Stave","addClef","setContext","voicing","group","chord","voicings","rhRender","lhRender","CENTRAL_NOTE","DEFAULT_OCTAVE","SCALE","definitions","scorev","getHCPC","hcpc","foundamental","reduce","iMax","arr","sort","createChords","drawChords","note","mod","chords","notestr","toNote","modifiers","hasModifier","addAccidental","Accidental","joinVoices","StaveConnector","setType","canvasChart","chart","Chart","labels","datasets","label","backgroundColor","borderColor","borderWidth","options","scales","yAxes","ticks","beginAtZero","dataset","update","components","SpectrumPresenter","OvertonesPresenter","VoicingsPresenter","HPCPPresenter","skip","playing","pause","play","paused","mute","changeVolume","volume","sampletime","samplelng","ctxprovider","source","createBufferSource","rate","startplayingtime","pausedAt","onEnd","nextPlayEvent","restore","setup","clearInterval","interval","currentTime","setInterval","ceil","stop","gain","setValueAtTime","connect","createGain","newSample","destination","nextSkipped","_g","dialog","strokeLine","GLOBALALPHA","previousblock","polyLines","canvasdom","canvasalpha","channelData","quantizer","lin","waveform","samplerate","inverseRatio","timeAnalysis","te","setUpInfoPanel","playingCursor","getPolyLine","v","$root","$on","remove","mouseCursor","canvasWrapper","AudioPlayer","Legend","r1","r2","colorMask","color1","mask1","color2","mask2","directives","rawName","target","composing","_n","$forceUpdate","drawPoly","clearPoly","tuplets","POLYACTIVE","createMask","ta","drawRhythm","renderers","signature","splitBars","bar","drawBar","stave","addTimeSignature","setEndBarType","Barline","END","lng","beat","subd","delta4","addPolyLine","left","modifier","setConfigForLines","_notes","toVexDuration","beams","Beam","generateBeams","FormatAndDraw","$emit","mcm","mask","bpm","swing","minBpm","maxBpm","signatures","base","quarter","swingAmount","swings","time","maxSwing","calculateSignatures","WaveformPresenter","SchemaPresenter","SignaturesPresenter","loading","tabs","String","HarmonicStructure","RhythmicStructure","Loading","use","icons","iconfont","config","productionTip","vuetify","render","h","$mount","Notes","Quarter","ConstNote","octave","QuarterRythm","PanelImpl","elements","clearRect","pop","DrawToolkitImpl","alpha","dpr","devicePixelRatio","scale","globalAlpha","FFTEssentia","AudioContextProviderImpl","audioContext","AudioContext","NoteFrequencyProviderImpl","f0","NOTE","minNote","maxNote","step","pow","deltacents","deltanote","noteFrequency"],"mappings":"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AAW,OACX,aAAc,OACd,UAAW,OACX,aAAc,OACd,UAAW,OACX,aAAc,OACd,UAAW,OACX,aAAc,OACd,UAAW,OACX,aAAc,OACd,UAAW,OACX,aAAc,OACd,UAAW,OACX,aAAc,OACd,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,aAAc,OACd,UAAW,OACX,aAAc,OACd,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,aAAc,OACd,UAAW,OACX,aAAc,OACd,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,aAAc,OACd,gBAAiB,OACjB,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,UAAW,OACX,aAAc,OACd,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,aAAc,OACd,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,aAAc,OACd,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OACX,OAAQ,OACR,UAAW,OAC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","file":"js/app.2282bdc8.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","import { SpectralExtractor, SpectralAnalisis } from './spectral-extractor'\nimport { injectable } from 'inversify-props'\nimport { ConstNote } from '@/model/note'\n// @ts-ignore\nimport Worker from 'worker-loader!../../workers/essentia'\nimport { EssentiaMessage } from '@/workers/essentia-message'\n\n@injectable()\nexport class EssentiaSpectralExtractor implements SpectralExtractor {\n  analyze (sample: number[]): Promise<SpectralAnalisis> {\n    return new Promise((resolve, reject) => {\n      const worker = new Worker()\n      let msg:EssentiaMessage = new EssentiaMessage(EssentiaMessage.HARMONY, sample)\n      worker.postMessage(msg)\n      worker.onmessage = (event:MessageEvent) => {\n        if (msg.isForMe(event.data)) {\n          resolve(event.data.payload)\n        }\n      }\n    })\n  }\n\n  normalize (data:number[]):Float32Array {\n    let max = Math.max.apply(data)\n    let min = Math.min.apply(data)\n    data.forEach(a => a - min / (max - min))\n\n    return Float32Array.from(data)\n  }\n}\n","import { SampleLoaderService } from './sample-loader'\nimport { injectable, inject } from 'inversify-props'\nimport { REGISTRY } from '@/ioc/registry'\nimport { AudioContextProvider } from '../providers/context-provider'\n\n@injectable()\nexport class SampleLoaderImpl implements SampleLoaderService {\n  @inject(REGISTRY.AudioContextProvider) context: AudioContextProvider;\n\n  loadFromUrl (url: string):Promise<AudioBuffer> {\n    return new Promise<AudioBuffer>(resolve => {\n      fetch(url).then(response => {\n        response.arrayBuffer().then(buffer => {\n          this.context.context().decodeAudioData(buffer, audioBuffer => resolve(audioBuffer))\n        })\n      })\n    })\n  }\n\n  loadFromFile (file: File): Promise<AudioBuffer> {\n    return new Promise<AudioBuffer>(resolve => {\n      const fr = new FileReader()\n      fr.readAsArrayBuffer(file)\n      fr.onload = () => {\n        if (fr.result) {\n          this.context.context().decodeAudioData(fr.result as ArrayBuffer, audioBuffer => resolve(audioBuffer))\n        } else {\n          resolve(this.context.context().createBuffer(2, 0, 44100))\n        }\n      }\n    })\n  }\n}\n","\nexport const REGISTRY = {\n  SpectralExtractor: Symbol.for('SpectralExtractor'),\n  TimeExtractor: Symbol.for('TimeExtractor'),\n  AudioContextProvider: Symbol.for('AudioContextProvider'),\n  NoteFrequencyProvider: Symbol.for('NoteFrequencyProvider'),\n  SampleLoader: Symbol.for('SampleLoader'),\n  Store: Symbol.for('Store'),\n  DrawToolkit: Symbol.for('DrawToolkit'),\n  Quantizer: Symbol.for('Quantizer'),\n  FFT: Symbol.for('FFT')\n}\n","var map = {\n\t\"./inversify.development.config\": \"4cbf\",\n\t\"./inversify.production.config\": \"fd69\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"1cba\";","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WaveformPresenter.vue?vue&type=style&index=0&id=298b5f30&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WaveformPresenter.vue?vue&type=style&index=0&id=298b5f30&lang=scss&scoped=true&\"","module.exports = __webpack_public_path__ + \"media/drums.c8e6d8d0.wav\";","import { injectable } from 'inversify-props'\n\nexport interface SpectrumPoint{\n  magnitude: number\n  frequency: number\n}\n\nexport interface Quantizer{\n  lin(array: number[], bars:number):number[]\n}\n\n@injectable()\nexport class QuantizerImpl implements Quantizer {\n  lin (array: number[], bars:number):number[] {\n    const blocksize = Math.floor(array.length / bars) // how many samples in each block\n    var dataf : number [] = [] // initialize the output\n\n    for (let i = 0; i < bars; i++) { // for each bar\n      let blockbegins = blocksize * i\n      let sum = 0\n\n      for (let j = 0; j < blocksize; j++) { // in each bar I sum up the values of each sample\n        sum = sum + Math.abs(array[blockbegins + j])\n      // sum\n      }\n      dataf.push(sum / blocksize) // pushes the average of each block into an array\n    }\n    const factor = Math.max(...dataf)\n    dataf = dataf.map(n => n * (1 / factor)) // average respect to the max\n    return dataf\n  }\n\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HPCPPresenter.vue?vue&type=style&index=0&id=1aef5a7a&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HPCPPresenter.vue?vue&type=style&index=0&id=1aef5a7a&lang=scss&scoped=true&\"","var map = {\n\t\"./af\": \"2bfb\",\n\t\"./af.js\": \"2bfb\",\n\t\"./ar\": \"8e73\",\n\t\"./ar-dz\": \"a356\",\n\t\"./ar-dz.js\": \"a356\",\n\t\"./ar-kw\": \"423e\",\n\t\"./ar-kw.js\": \"423e\",\n\t\"./ar-ly\": \"1cfd\",\n\t\"./ar-ly.js\": \"1cfd\",\n\t\"./ar-ma\": \"0a84\",\n\t\"./ar-ma.js\": \"0a84\",\n\t\"./ar-sa\": \"8230\",\n\t\"./ar-sa.js\": \"8230\",\n\t\"./ar-tn\": \"6d83\",\n\t\"./ar-tn.js\": \"6d83\",\n\t\"./ar.js\": \"8e73\",\n\t\"./az\": \"485c\",\n\t\"./az.js\": \"485c\",\n\t\"./be\": \"1fc1\",\n\t\"./be.js\": \"1fc1\",\n\t\"./bg\": \"84aa\",\n\t\"./bg.js\": \"84aa\",\n\t\"./bm\": \"a7fa\",\n\t\"./bm.js\": \"a7fa\",\n\t\"./bn\": \"9043\",\n\t\"./bn.js\": \"9043\",\n\t\"./bo\": \"d26a\",\n\t\"./bo.js\": \"d26a\",\n\t\"./br\": \"6887\",\n\t\"./br.js\": \"6887\",\n\t\"./bs\": \"2554\",\n\t\"./bs.js\": \"2554\",\n\t\"./ca\": \"d716\",\n\t\"./ca.js\": \"d716\",\n\t\"./cs\": \"3c0d\",\n\t\"./cs.js\": \"3c0d\",\n\t\"./cv\": \"03ec\",\n\t\"./cv.js\": \"03ec\",\n\t\"./cy\": \"9797\",\n\t\"./cy.js\": \"9797\",\n\t\"./da\": \"0f14\",\n\t\"./da.js\": \"0f14\",\n\t\"./de\": \"b469\",\n\t\"./de-at\": \"b3eb\",\n\t\"./de-at.js\": \"b3eb\",\n\t\"./de-ch\": \"bb71\",\n\t\"./de-ch.js\": \"bb71\",\n\t\"./de.js\": \"b469\",\n\t\"./dv\": \"598a\",\n\t\"./dv.js\": \"598a\",\n\t\"./el\": \"8d47\",\n\t\"./el.js\": \"8d47\",\n\t\"./en-SG\": \"cdab\",\n\t\"./en-SG.js\": \"cdab\",\n\t\"./en-au\": \"0e6b\",\n\t\"./en-au.js\": \"0e6b\",\n\t\"./en-ca\": \"3886\",\n\t\"./en-ca.js\": \"3886\",\n\t\"./en-gb\": \"39a6\",\n\t\"./en-gb.js\": \"39a6\",\n\t\"./en-ie\": \"e1d3\",\n\t\"./en-ie.js\": \"e1d3\",\n\t\"./en-il\": \"7333\",\n\t\"./en-il.js\": \"7333\",\n\t\"./en-nz\": \"6f50\",\n\t\"./en-nz.js\": \"6f50\",\n\t\"./eo\": \"65db\",\n\t\"./eo.js\": \"65db\",\n\t\"./es\": \"898b\",\n\t\"./es-do\": \"0a3c\",\n\t\"./es-do.js\": \"0a3c\",\n\t\"./es-us\": \"55c9\",\n\t\"./es-us.js\": \"55c9\",\n\t\"./es.js\": \"898b\",\n\t\"./et\": \"ec18\",\n\t\"./et.js\": \"ec18\",\n\t\"./eu\": \"0ff2\",\n\t\"./eu.js\": \"0ff2\",\n\t\"./fa\": \"8df4\",\n\t\"./fa.js\": \"8df4\",\n\t\"./fi\": \"81e9\",\n\t\"./fi.js\": \"81e9\",\n\t\"./fo\": \"0721\",\n\t\"./fo.js\": \"0721\",\n\t\"./fr\": \"9f26\",\n\t\"./fr-ca\": \"d9f8\",\n\t\"./fr-ca.js\": \"d9f8\",\n\t\"./fr-ch\": \"0e49\",\n\t\"./fr-ch.js\": \"0e49\",\n\t\"./fr.js\": \"9f26\",\n\t\"./fy\": \"7118\",\n\t\"./fy.js\": \"7118\",\n\t\"./ga\": \"5120\",\n\t\"./ga.js\": \"5120\",\n\t\"./gd\": \"f6b4\",\n\t\"./gd.js\": \"f6b4\",\n\t\"./gl\": \"8840\",\n\t\"./gl.js\": \"8840\",\n\t\"./gom-latn\": \"0caa\",\n\t\"./gom-latn.js\": \"0caa\",\n\t\"./gu\": \"e0c5\",\n\t\"./gu.js\": \"e0c5\",\n\t\"./he\": \"c7aa\",\n\t\"./he.js\": \"c7aa\",\n\t\"./hi\": \"dc4d\",\n\t\"./hi.js\": \"dc4d\",\n\t\"./hr\": \"4ba9\",\n\t\"./hr.js\": \"4ba9\",\n\t\"./hu\": \"5b14\",\n\t\"./hu.js\": \"5b14\",\n\t\"./hy-am\": \"d6b6\",\n\t\"./hy-am.js\": \"d6b6\",\n\t\"./id\": \"5038\",\n\t\"./id.js\": \"5038\",\n\t\"./is\": \"0558\",\n\t\"./is.js\": \"0558\",\n\t\"./it\": \"6e98\",\n\t\"./it-ch\": \"6f12\",\n\t\"./it-ch.js\": \"6f12\",\n\t\"./it.js\": \"6e98\",\n\t\"./ja\": \"079e\",\n\t\"./ja.js\": \"079e\",\n\t\"./jv\": \"b540\",\n\t\"./jv.js\": \"b540\",\n\t\"./ka\": \"201b\",\n\t\"./ka.js\": \"201b\",\n\t\"./kk\": \"6d79\",\n\t\"./kk.js\": \"6d79\",\n\t\"./km\": \"e81d\",\n\t\"./km.js\": \"e81d\",\n\t\"./kn\": \"3e92\",\n\t\"./kn.js\": \"3e92\",\n\t\"./ko\": \"22f8\",\n\t\"./ko.js\": \"22f8\",\n\t\"./ku\": \"2421\",\n\t\"./ku.js\": \"2421\",\n\t\"./ky\": \"9609\",\n\t\"./ky.js\": \"9609\",\n\t\"./lb\": \"440c\",\n\t\"./lb.js\": \"440c\",\n\t\"./lo\": \"b29d\",\n\t\"./lo.js\": \"b29d\",\n\t\"./lt\": \"26f9\",\n\t\"./lt.js\": \"26f9\",\n\t\"./lv\": \"b97c\",\n\t\"./lv.js\": \"b97c\",\n\t\"./me\": \"293c\",\n\t\"./me.js\": \"293c\",\n\t\"./mi\": \"688b\",\n\t\"./mi.js\": \"688b\",\n\t\"./mk\": \"6909\",\n\t\"./mk.js\": \"6909\",\n\t\"./ml\": \"02fb\",\n\t\"./ml.js\": \"02fb\",\n\t\"./mn\": \"958b\",\n\t\"./mn.js\": \"958b\",\n\t\"./mr\": \"39bd\",\n\t\"./mr.js\": \"39bd\",\n\t\"./ms\": \"ebe4\",\n\t\"./ms-my\": \"6403\",\n\t\"./ms-my.js\": \"6403\",\n\t\"./ms.js\": \"ebe4\",\n\t\"./mt\": \"1b45\",\n\t\"./mt.js\": \"1b45\",\n\t\"./my\": \"8689\",\n\t\"./my.js\": \"8689\",\n\t\"./nb\": \"6ce3\",\n\t\"./nb.js\": \"6ce3\",\n\t\"./ne\": \"3a39\",\n\t\"./ne.js\": \"3a39\",\n\t\"./nl\": \"facd\",\n\t\"./nl-be\": \"db29\",\n\t\"./nl-be.js\": \"db29\",\n\t\"./nl.js\": \"facd\",\n\t\"./nn\": \"b84c\",\n\t\"./nn.js\": \"b84c\",\n\t\"./pa-in\": \"f3ff\",\n\t\"./pa-in.js\": \"f3ff\",\n\t\"./pl\": \"8d57\",\n\t\"./pl.js\": \"8d57\",\n\t\"./pt\": \"f260\",\n\t\"./pt-br\": \"d2d4\",\n\t\"./pt-br.js\": \"d2d4\",\n\t\"./pt.js\": \"f260\",\n\t\"./ro\": \"972c\",\n\t\"./ro.js\": \"972c\",\n\t\"./ru\": \"957c\",\n\t\"./ru.js\": \"957c\",\n\t\"./sd\": \"6784\",\n\t\"./sd.js\": \"6784\",\n\t\"./se\": \"ffff\",\n\t\"./se.js\": \"ffff\",\n\t\"./si\": \"eda5\",\n\t\"./si.js\": \"eda5\",\n\t\"./sk\": \"7be6\",\n\t\"./sk.js\": \"7be6\",\n\t\"./sl\": \"8155\",\n\t\"./sl.js\": \"8155\",\n\t\"./sq\": \"c8f3\",\n\t\"./sq.js\": \"c8f3\",\n\t\"./sr\": \"cf1e\",\n\t\"./sr-cyrl\": \"13e9\",\n\t\"./sr-cyrl.js\": \"13e9\",\n\t\"./sr.js\": \"cf1e\",\n\t\"./ss\": \"52bd\",\n\t\"./ss.js\": \"52bd\",\n\t\"./sv\": \"5fbd\",\n\t\"./sv.js\": \"5fbd\",\n\t\"./sw\": \"74dc\",\n\t\"./sw.js\": \"74dc\",\n\t\"./ta\": \"3de5\",\n\t\"./ta.js\": \"3de5\",\n\t\"./te\": \"5cbb\",\n\t\"./te.js\": \"5cbb\",\n\t\"./tet\": \"576c\",\n\t\"./tet.js\": \"576c\",\n\t\"./tg\": \"3b1b\",\n\t\"./tg.js\": \"3b1b\",\n\t\"./th\": \"10e8\",\n\t\"./th.js\": \"10e8\",\n\t\"./tl-ph\": \"0f38\",\n\t\"./tl-ph.js\": \"0f38\",\n\t\"./tlh\": \"cf75\",\n\t\"./tlh.js\": \"cf75\",\n\t\"./tr\": \"0e81\",\n\t\"./tr.js\": \"0e81\",\n\t\"./tzl\": \"cf51\",\n\t\"./tzl.js\": \"cf51\",\n\t\"./tzm\": \"c109\",\n\t\"./tzm-latn\": \"b53d\",\n\t\"./tzm-latn.js\": \"b53d\",\n\t\"./tzm.js\": \"c109\",\n\t\"./ug-cn\": \"6117\",\n\t\"./ug-cn.js\": \"6117\",\n\t\"./uk\": \"ada2\",\n\t\"./uk.js\": \"ada2\",\n\t\"./ur\": \"5294\",\n\t\"./ur.js\": \"5294\",\n\t\"./uz\": \"2e8c\",\n\t\"./uz-latn\": \"010e\",\n\t\"./uz-latn.js\": \"010e\",\n\t\"./uz.js\": \"2e8c\",\n\t\"./vi\": \"2921\",\n\t\"./vi.js\": \"2921\",\n\t\"./x-pseudo\": \"fd7e\",\n\t\"./x-pseudo.js\": \"fd7e\",\n\t\"./yo\": \"7f33\",\n\t\"./yo.js\": \"7f33\",\n\t\"./zh-cn\": \"5c3a\",\n\t\"./zh-cn.js\": \"5c3a\",\n\t\"./zh-hk\": \"49ab\",\n\t\"./zh-hk.js\": \"49ab\",\n\t\"./zh-tw\": \"90ea\",\n\t\"./zh-tw.js\": \"90ea\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"4678\";","import { Observable, BehaviorSubject, AsyncSubject } from 'rxjs'\nimport { map } from 'rxjs/operators'\nimport { injectable, inject } from 'inversify-props'\nimport { REGISTRY } from '@/ioc/registry'\nimport { SampleLoaderService } from '../sample-loader/sample-loader'\nimport { TimeAnalisis, TimeExtractor } from '../time-extractor/time-extractor'\nimport { FFT, FFTResponse } from '../providers/fft'\nimport { EssentiaSpectralExtractor } from '../spectral-extractor/essentia-spectral-extractor'\nimport { SpectrumPoint } from '../providers/quantizer'\n\nexport interface Example{\n  name: string,\n  url: string\n}\n\nexport interface Store{\n    sample():Observable<AudioBuffer | null>\n    nextSample(sample:AudioBuffer):void\n    timeAnalysis():Observable<TimeAnalisis | null>\n    channelData ():Float32Array\n    playing ():Observable<PlayingEvent>\n    resetPlayEvent ():void\n    nextPlayEvent (pe:PlayingEvent):void\n    skipped():Observable<number | null>\n    nextSkipped(skipped:number):void\n    sampleExamples():Example[]\n    getPolyLine ():Observable<number[] | null>\n    addPolyLine (number:number[]):void\n    getSpectralPeaks ():Observable<number[] | null>\n    getHCPC ():Observable<number[] | null>\n    getFFT():Observable<SpectrumPoint[] | null>\n    loading():Observable<boolean>\n    setLoading():void\n}\n\nexport interface PlayingEvent{\n  status:boolean\n  length:number\n  elapsed:number\n}\n\n@injectable()\nexport class StoreImpl implements Store {\n    @inject(REGISTRY.SpectralExtractor) spectralExtractor: EssentiaSpectralExtractor\n    @inject(REGISTRY.TimeExtractor) extractor:TimeExtractor\n    @inject(REGISTRY.FFT) fft:FFT\n\n    protected _sample:BehaviorSubject<AudioBuffer | null> = new BehaviorSubject<AudioBuffer | null>(null);\n    protected _timeAnalisis:BehaviorSubject<TimeAnalisis | null> = new BehaviorSubject<TimeAnalisis | null>(null);\n\n    emptySampleEvent:PlayingEvent = { status: false, length: 0, elapsed: 0 }\n\n    private _playing:BehaviorSubject<PlayingEvent> = new BehaviorSubject<PlayingEvent>(this.emptySampleEvent);\n\n    protected _skipped:BehaviorSubject<number | null> = new BehaviorSubject<number | null>(null);\n\n    private _polyAdded = new BehaviorSubject<number[] | null>(null);\n    private _spectralpeaks = new BehaviorSubject<number[] | null>(null)\n    private _hpcp = new BehaviorSubject<number[] | null>(null)\n    private _fft = new BehaviorSubject<SpectrumPoint[] | null>(null)\n    private _loading = new BehaviorSubject<boolean>(true)\n\n    sample (): Observable<AudioBuffer | null> {\n      return this._sample\n    }\n\n    private _channelData (s:AudioBuffer):Float32Array {\n      let channel = s.getChannelData(0)\n      for (let j = 1; j < s.numberOfChannels; j++) {\n        let d = s.getChannelData(j)\n        channel = channel.map((a, b) => (a + d[b]) / s.numberOfChannels)\n      }\n      return channel\n    }\n\n    channelData ():Float32Array {\n      return this._sample.value ? this._channelData(this._sample.value) : Float32Array.from([0])\n    }\n\n    timeAnalysis (): Observable<TimeAnalisis | null> {\n      return this._timeAnalisis\n    }\n\n    nextSample (sample: AudioBuffer): void {\n      this._timeAnalisis.next(null)\n      this._hpcp.next(null)\n      this._spectralpeaks.next(null)\n      this._fft.next(null)\n      this._sample.next(sample)\n\n      var data = this._channelData(sample)\n\n      this.fft.of(data).then((spectrum:FFTResponse) => {\n        const fft = spectrum.full.map((x, i) => {\n          return { magnitude: x, frequency: i * ((sample.sampleRate / 2) / spectrum.full.length) }\n        })\n\n        this._fft.next(fft)\n\n        this.spectralExtractor.analyze(spectrum.subsampled).then(se => {\n          this._spectralpeaks.next(se.peaks.frequencies)\n          this._hpcp.next(se.hpcp)\n\n          this.extractor.analyze(data).then(a => {\n            this._timeAnalisis.next(a)\n            this._loading.next(false)\n          })\n        })\n      })\n    }\n\n    playing ():Observable<PlayingEvent> {\n      return this._playing\n    }\n\n    resetPlayEvent () {\n      this._playing.next(this.emptySampleEvent)\n    }\n\n    nextPlayEvent (pe:PlayingEvent) {\n      this._playing.next(pe)\n    }\n\n    skipped (): Observable<number | null> {\n      return this._skipped\n    }\n\n    nextSkipped (skipped : number): void {\n      this._skipped.next(skipped)\n    }\n\n    sampleExamples (): Example[] {\n      return [\n        { name: 'cello', url: require('@/assets/cello.wav') },\n        { name: 'drums', url: require('@/assets/drums.wav') },\n        { name: 'rhodes', url: require('@/assets/rhodes.wav') },\n        { name: 'amen-break', url: require('@/assets/amen.wav') }\n\n      ]\n    }\n\n    getPolyLine ():Observable<number[] | null> { return this._polyAdded }\n    addPolyLine (n : number[]) { this._polyAdded.next(n) }\n\n    getSpectralPeaks ():Observable<number[] | null> { return this._spectralpeaks }\n    getHCPC (): Observable<number[] | null> { return this._hpcp }\n\n    getFFT (): Observable<SpectrumPoint[] | null> { return this._fft }\n\n    setLoading () {\n      this._loading.next(true)\n    }\n\n    loading ():Observable<boolean> {\n      return this._loading\n    }\n}\n\n@injectable()\nexport class PreLoadedStore extends StoreImpl {\n    @inject(REGISTRY.SampleLoader) sampleLoader:SampleLoaderService\n\n    constructor () {\n      super()\n      const cello = require('@/assets/cello.wav')\n      const drums = require('@/assets/drums.wav')\n      const rhodes = require('@/assets/rhodes.wav')\n      const amen = require('@/assets/amen.wav')\n\n      this.sampleLoader.loadFromUrl(cello).then(sample => {\n        this.nextSample(sample)\n      })\n    }\n}\n","import { SpectralExtractor } from '@/services/spectral-extractor/spectral-extractor'\nimport { DummySpectralExtractor } from '@/services/spectral-extractor/spectral-extractor-impl'\nimport { REGISTRY } from './registry'\nimport { container } from 'inversify-props'\nimport { AudioContextProviderImpl, AudioContextProvider } from '@/services/providers/context-provider'\nimport { SampleLoaderService } from '@/services/sample-loader/sample-loader'\nimport { SampleLoaderImpl } from '@/services/sample-loader/sample-loader-impl'\nimport { StoreImpl, Store, PreLoadedStore } from '@/services/store/store'\nimport { TimeExtractor } from '@/services/time-extractor/time-extractor'\nimport { DummyTimeExtractor } from '@/services/time-extractor/dummy-time-extractor'\nimport { DrawToolkit, DrawToolkitImpl } from '@/services/providers/draw-toolkit'\nimport { NoteFrequencyProvider, NoteFrequencyProviderImpl } from '@/services/providers/note-frequency'\nimport { Quantizer, QuantizerImpl } from '@/services/providers/quantizer'\nimport { FFTEssentia } from '@/services/providers/fft'\nimport { EssentiaTimeExtractor } from '@/services/time-extractor/essentia-time-extractor'\nimport { EssentiaSpectralExtractor } from '@/services/spectral-extractor/essentia-spectral-extractor'\n\nexport default function () {\n  container.addSingleton<SpectralExtractor>(EssentiaSpectralExtractor, REGISTRY.SpectralExtractor)\n  container.addSingleton<TimeExtractor>(EssentiaTimeExtractor, REGISTRY.TimeExtractor)\n  container.addSingleton<AudioContextProvider>(AudioContextProviderImpl, REGISTRY.AudioContextProvider)\n  container.addSingleton<NoteFrequencyProvider>(NoteFrequencyProviderImpl, REGISTRY.NoteFrequencyProvider)\n  container.addSingleton<SampleLoaderService>(SampleLoaderImpl, REGISTRY.SampleLoader)\n  container.addSingleton<Store>(PreLoadedStore, REGISTRY.Store)\n  container.addSingleton<DrawToolkit>(DrawToolkitImpl, REGISTRY.DrawToolkit)\n  container.addSingleton<Quantizer>(QuantizerImpl, REGISTRY.Quantizer)\n  container.addSingleton<FFTEssentia>(FFTEssentia, REGISTRY.FFT)\n};\n","import { injectable } from 'inversify-props'\nimport { TimeExtractor, TimeAnalisis } from './time-extractor'\n// @ts-ignore\nimport Worker from 'worker-loader!../../workers/essentia'\nimport { EssentiaMessage } from '@/workers/essentia-message'\n\n@injectable()\nexport class EssentiaTimeExtractor implements TimeExtractor {\n\n\n  analyze (sample: Float32Array): Promise<TimeAnalisis> {\n    return new Promise((resolve, reject) => {\n      const worker = new Worker()\n      let msg = new EssentiaMessage(EssentiaMessage.RHYTHM, this.normalize(Array.from(sample)))\n      worker.postMessage(msg)\n      worker.onmessage = (event:MessageEvent) => {\n        if (msg.isForMe(event.data)) {\n          let pos:number[] = Array.from(event.data.payload)\n          resolve({\n            start: 0,\n            end: 3,\n            peaks: pos,\n            envelope: [],\n            attackSlope: 2,\n            decaySlope: 0.3\n          })\n        }\n      }\n    })\n  }\n\n  normalize (data:number[]):Float32Array {\n    let max = Math.max.apply(data)\n    let min = Math.min.apply(data)\n    data.forEach(a => a - min / (max - min))\n\n    return Float32Array.from(data)\n  }\n}\n","module.exports = __webpack_public_path__ + \"media/amen.a6af8d25.wav\";","module.exports = function() {\n  return new Worker(__webpack_public_path__ + \"c5edcd184f60b5cd30c3.worker.js\");\n};","export interface Message{\n    type:string\n    payload:any\n    reply (payload:any):Message\n    isForMe(message:Message):boolean\n}\n\nexport class EssentiaMessage implements Message {\n    static SPECTRUM = 'spectrum'\n    static RHYTHM = 'rhythm'\n    static HARMONY = 'harmony'\n\n    private ID:string;\n    type:string;\n    payload:any;\n\n    constructor (type:string, payload:any) {\n      this.ID = '_' + Math.random().toString(36).substr(2, 9)\n      this.type = type\n      this.payload = payload\n    }\n\n    static fromData (d:any) {\n      let clonedMessage = new EssentiaMessage(d.type, d.payload)\n      clonedMessage.setID(d.ID)\n      return clonedMessage\n    }\n\n    private setID (id:string) {\n      this.ID = id\n    }\n\n    reply (payload:any):Message {\n      let reply = new EssentiaMessage(this.type, payload)\n      reply.setID(this.ID)\n      return reply\n    }\n\n    isForMe (message: any): boolean {\n      if (message.ID) {\n        return message.ID === this.ID\n      }\n      return false\n    }\n}\n","module.exports = __webpack_public_path__ + \"media/cello.170fe634.wav\";","const env = process.env.NODE_ENV || 'development'\n\n// Register ioc\nrequire(`./inversify.${env}.config`).default()\n","module.exports = __webpack_public_path__ + \"media/rhodes.194f135b.wav\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',{attrs:{\"id\":\"inspire\"}},[_c('loading',{attrs:{\"active\":_vm.isLoading,\"can-cancel\":false,\"is-full-page\":true},on:{\"update:active\":function($event){_vm.isLoading=$event}}}),_c('v-navigation-drawer',{attrs:{\"app\":\"\",\"clipped\":\"\"},model:{value:(_vm.drawer),callback:function ($$v) {_vm.drawer=$$v},expression:\"drawer\"}},[_c('SampleLoader')],1),_c('v-app-bar',{attrs:{\"app\":\"\",\"clipped-left\":\"\"}},[_c('v-app-bar-nav-icon',{on:{\"click\":function($event){$event.stopPropagation();_vm.drawer = !_vm.drawer}}}),_c('v-toolbar-title',[_vm._v(\"Sample analyzer\")])],1),_c('v-content',[_c('v-tabs',{attrs:{\"centered\":\"\",\"grow\":\"\"}},[_c('v-tabs-slider',{attrs:{\"color\":\"#1976D2\"}}),_vm._l((_vm.tabs),function(tab){return _c('v-tab',{key:tab,on:{\"click\":function($event){_vm.currentTab = tab}}},[_vm._v(\" \"+_vm._s(tab)+\" \")])}),_c('v-tab-item',[_c('HarmonicStructure')],1),_c('v-tab-item',[_c('RhythmicStructure')],1)],2)],1),_c('v-footer',{attrs:{\"app\":\"\"}},[_c('span',[_vm._v(\" 2020\")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{staticClass:\"mx-auto\"},[_c('v-card-title',[_c('v-icon',{attrs:{\"large\":\"\",\"left\":\"\"}},[_vm._v(\"mdi-twitter\")]),_c('span',{staticClass:\"title font-weight-light\"},[_vm._v(\"Sample loader\")])],1),_c('v-card-text',[_c('v-file-input',{attrs:{\"label\":\"File input\"},on:{\"change\":_vm.load}}),_c('v-list',[_c('v-subheader',[_vm._v(\"EXAMPLES\")]),_c('v-list-item-group',{attrs:{\"color\":\"primary\"}},_vm._l((_vm.examples),function(item,i){return _c('v-list-item',{key:i},[_c('v-list-item-content',[_c('v-list-item-title',{domProps:{\"textContent\":_vm._s(item.name)},on:{\"click\":function($event){return _vm.selectSample(item)}}})],1)],1)}),1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport { Component } from 'vue-property-decorator'\nimport { REGISTRY } from '../../ioc/registry'\nimport { inject } from 'inversify-props'\nimport { SampleLoaderService } from '../../services/sample-loader/sample-loader'\nimport { Store, Example } from '@/services/store/store'\n\n@Component\nexport default class SampleLoader extends Vue {\n  @inject(REGISTRY.SampleLoader) sampleLoader:SampleLoaderService;\n  @inject(REGISTRY.Store) store:Store\n\n  examples = this.store.sampleExamples()\n\n  selectSample (s:Example) {\n    this.store.setLoading()\n    this.sampleLoader.loadFromUrl(s.url).then(ab => {\n      this.store.nextSample(ab)\n    })\n  }\n\n  load (file:File) {\n    this.store.setLoading()\n    this.sampleLoader.loadFromFile(file).then(ab => {\n      this.store.nextSample(ab)\n    })\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SampleLoader.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SampleLoader.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./SampleLoader.vue?vue&type=template&id=5888c48c&scoped=true&\"\nimport script from \"./SampleLoader.vue?vue&type=script&lang=ts&\"\nexport * from \"./SampleLoader.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5888c48c\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fluid\":\"\"}},[_c('v-row',{attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('SpectrumPresenter')],1),_c('v-row',{attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('HPCPPresenter')],1),_c('v-row',[_c('OvertonesPresenter'),_c('VoicingsPresenter')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"col-12\"},[_c('v-row',{attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('v-card',{staticClass:\"mx-auto col-10 mb-5 center\"},[_c('h2',[_vm._v(\"Spectrum\")]),_c('div',{ref:\"wrapper-spectrum\",staticClass:\"wrapper\",on:{\"mouseover\":function($event){_vm.hover = true},\"mouseleave\":_vm.hide}},[_c('canvas',{ref:\"hover\",staticClass:\"spectrum\"}),_c('canvas',{ref:\"spectrum\",staticClass:\"spectrum\"})]),_c('div',[_c('v-radio-group',{attrs:{\"row\":\"\"},on:{\"change\":function($event){return _vm.drawSpectrum()}},model:{value:(_vm.log),callback:function ($$v) {_vm.log=$$v},expression:\"log\"}},[_c('v-radio',{attrs:{\"label\":\"Log\",\"value\":true}}),_c('v-radio',{attrs:{\"label\":\"Lin\",\"value\":false}})],1)],1),_c('div',[_c('v-range-slider',{staticClass:\"align-center\",attrs:{\"max\":_vm.maxFreq,\"min\":_vm.minFreq,\"hide-details\":\"\"},on:{\"change\":function($event){return _vm.drawSpectrum()}},scopedSlots:_vm._u([{key:\"prepend\",fn:function(){return [_c('v-text-field',{staticClass:\"mt-0 pt-0\",staticStyle:{\"width\":\"60px\"},attrs:{\"value\":_vm.freqRange[0],\"hide-details\":\"\",\"single-line\":\"\",\"type\":\"number\"},on:{\"change\":function($event){return _vm.$set(_vm.freqRange, 0, $event)}}})]},proxy:true},{key:\"append\",fn:function(){return [_c('v-text-field',{staticClass:\"mt-0 pt-0\",staticStyle:{\"width\":\"60px\"},attrs:{\"value\":_vm.freqRange[1],\"hide-details\":\"\",\"single-line\":\"\",\"type\":\"number\"},on:{\"change\":function($event){return _vm.$set(_vm.freqRange, 1, $event)}}})]},proxy:true}]),model:{value:(_vm.freqRange),callback:function ($$v) {_vm.freqRange=$$v},expression:\"freqRange\"}})],1)])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { Drawable } from '@/services/providers/draw-toolkit'\n\nexport class FreqBox implements Drawable {\n  freq:string\n  amplitude:string\n  xpos:number\n  ypos:number\n  visible:boolean\n\n  constructor (freq:string, amplitude:string, xpos:number, ypos:number, visible:boolean) {\n    this.freq = freq\n    this.amplitude = amplitude\n    this.xpos = xpos\n    this.ypos = ypos\n    this.visible = visible\n  }\n\n  draw (ctx:CanvasRenderingContext2D, canvas:HTMLCanvasElement) {\n    if (this.visible) {\n      ctx.font = '10px verdana'\n      if (this.xpos + 50 <= canvas.width) {\n        ctx.fillText(this.freq, this.xpos, this.ypos + 35)\n      } else {\n        ctx.fillText(this.freq, this.xpos - 50, this.ypos + 35)\n      }\n    }\n  }\n}\n","export function virtualCanvas(canvasWidth:number,start:number,length:number):{width:number, offset:number} {\n    let width = canvasWidth\n    let offsetX = -(Math.log(start/length) / Math.log(width) * width + width)\n    while((width + offsetX - canvasWidth) < 0 && width < 10000) {\n        width += 10;\n        offsetX = -(Math.log(start/length) / Math.log(width) * width + width)\n    }\n    return {width: width, offset:offsetX}\n}","import { Drawable } from '@/services/providers/draw-toolkit'\nimport { SpectrumPoint } from '@/services/providers/quantizer'\nimport { virtualCanvas } from './utils/logUtils'\n\nexport class Spectra implements Drawable {\n    spectrum:SpectrumPoint[]\n    log:boolean = true\n    min: number = 40\n\n    constructor (spectrum:SpectrumPoint[],min:number,log:boolean) {\n      this.spectrum = spectrum\n      this.min = min\n      this.log = log\n    }\n\n    draw (ctx: CanvasRenderingContext2D, canvas:HTMLCanvasElement) {\n      \n      ctx.translate(0, canvas.height - 20) // canvas y axis to be on the bottom of the canvas |_|\n      \n      const maxin = Math.max(...this.spectrum.map(x => x.magnitude))\n      const minin = Math.min(...this.spectrum.map(x => x.magnitude))\n      const maxout = 10\n      const minout = 1\n      let scaled = this.spectrum.map(x => x.magnitude).map((a) => {\n        return (a - minin) * (maxout - minout) / (maxin - minin) + minout\n      })\n      let width = canvas.width\n      const height = canvas.height\n      const padding = -5\n      const nblocks = this.spectrum.length\n      let start = 0\n      let offsetX = -1000\n      if(this.log) {\n        const minFreqIndex = this.spectrum.findIndex(x => x.frequency > this.min)\n        start = minFreqIndex\n        const sizing = virtualCanvas(canvas.width,start,nblocks)\n        offsetX = sizing.offset\n        width = sizing.width\n      }\n      for (let i = start; i < nblocks; i++) {\n        let x = 0;\n        if(this.log) {\n          x = width + offsetX + (Math.log((i)/(nblocks)) / Math.log(width)) * width\n        } else { //linear\n          x = i / nblocks * width\n        }\n        \n        let y = Math.log10(scaled[i]) * height - padding\n\n        // drawing the line\n        ctx.lineWidth = 0.5\n        ctx.strokeStyle = '#034efc'\n        ctx.beginPath()\n        ctx.moveTo(x, 0)\n        ctx.lineTo(x, -y)\n        ctx.stroke()\n      }\n      ctx.translate(0, -(canvas.height - 20)) // Bring back Y = 0 to be in top of the canvas to match standard\n    }\n}\n","import { Drawable } from '@/services/providers/draw-toolkit'\nimport { SpectrumPoint } from '@/services/providers/quantizer'\nimport { of } from 'rxjs'\nimport { virtualCanvas } from './utils/logUtils'\n\nexport class Axis implements Drawable {\n    textFreq:string[]\n    graphicFreq: number[]\n    q:SpectrumPoint[]\n    max:number\n    log:boolean = true\n    min:number = 40\n\n    constructor (t:string[], n:number[], q:SpectrumPoint[], max:number, min:number, log:boolean) {\n      this.textFreq = t\n      this.graphicFreq = n\n      this.q = q\n      this.max = max\n      this.min = min\n      this.log =  log\n    }\n\n    draw (ctx:CanvasRenderingContext2D, canvas:HTMLCanvasElement) {\n      ctx.translate(0, canvas.offsetHeight - 20)\n      ctx.lineWidth = 1\n      ctx.beginPath()\n      ctx.moveTo(0, 0)\n      ctx.lineTo(canvas.width - 1, 0)\n      ctx.stroke()\n      ctx.moveTo(0, 0)\n      ctx.lineTo(1, -canvas.offsetHeight + 1)\n      ctx.stroke()\n      // frequency bins\n      for (let j = 0; j < this.graphicFreq.length; j++) {\n        if (this.graphicFreq[j] < this.max && this.graphicFreq[j] >= this.min) {\n          let widthpx = canvas.width // px width\n\n          let minDelta = Math.min(...this.q.map(x => Math.abs(x.frequency - this.graphicFreq[j])))\n          let idx = this.q.findIndex(x => x.frequency + minDelta === this.graphicFreq[j] || x.frequency - minDelta === this.graphicFreq[j])\n         \n          let pos = 0;\n\n          if(this.log) {\n            const minFreqIndex = this.q.findIndex(x => x.frequency > this.min)\n            const sizing = virtualCanvas(canvas.offsetWidth,minFreqIndex,this.q.length)\n            pos = sizing.width + sizing.offset + Math.log(idx/this.q.length) / Math.log(sizing.width) * sizing.width\n          } else {\n            pos = Math.floor(idx / this.q.length * widthpx)\n          }\n          ctx.lineWidth = 3\n          ctx.strokeStyle = 'black'\n          ctx.beginPath()\n          ctx.moveTo(pos, -4)\n          ctx.lineTo(pos, 4)\n          ctx.stroke()\n          ctx.lineWidth = 0.5\n          ctx.font = '8px verdana'\n          ctx.strokeText(this.textFreq[j], pos - 5, 15)\n        }\n      }\n      ctx.translate(0, -(canvas.offsetHeight - 20)) // Bring back Y = 0 to be in top of the canvas to match standard\n    }\n}\n","import { Drawable } from '@/services/providers/draw-toolkit'\nimport { virtualCanvas } from './utils/logUtils'\n\nexport class Line implements Drawable {\n  color:string\n  width:number\n  x: number // expressed in %, from 0 to 1\n  visible: boolean\n  log:boolean\n  start:number\n  length:number\n\n  constructor (color:string, width:number, x: number, visible: boolean, start?:number, length?:number) {\n    this.color = color\n    this.width = width\n    this.x = x\n    this.visible = visible\n    this.log = false\n    if(start && length) {\n      this.log = true\n      this.start = start\n      this.length = length\n    }\n  }\n\n\n  draw (ctx:CanvasRenderingContext2D) {\n    if (this.visible) {\n      ctx.strokeStyle = this.color\n      ctx.lineWidth = this.width\n      ctx.beginPath()\n      let posx = Math.floor(ctx.canvas.width * this.x)\n      if(this.log) {\n        const sizing = virtualCanvas(ctx.canvas.width,this.start,this.length)\n        posx = sizing.width + sizing.offset + Math.log(this.x) / Math.log(sizing.width) * sizing.width\n      }\n      \n      ctx.moveTo(posx, 0)\n      ctx.lineTo(posx, ctx.canvas.offsetHeight)\n      ctx.stroke()\n    }\n  }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport { Component, Ref } from 'vue-property-decorator'\nimport { Store } from '@/services/store/store'\nimport { AudioContextProvider } from '../../services/providers/context-provider'\nimport { inject } from 'inversify-props'\nimport { REGISTRY } from '@/ioc/registry'\nimport { EssentiaSpectralExtractor } from '@/services/spectral-extractor/essentia-spectral-extractor'\nimport { DrawToolkit, Panel } from '../../services/providers/draw-toolkit'\nimport { FreqBox } from '../../drawables/freqBox'\nimport { Spectra } from '../../drawables/spectra'\nimport { Axis } from '../../drawables/axis'\nimport { SpectrumPoint } from '../../services/providers/quantizer'\nimport { Line } from '../../drawables/line'\nimport { virtualCanvas } from '@/drawables/utils/logUtils'\nimport { SpectralAnalisis } from '../../services/spectral-extractor/spectral-extractor'\nimport { find } from 'rxjs/operators'\n\n@Component\nexport default class SpectrumPresenter extends Vue {\n    @inject(REGISTRY.Store) store:Store\n    @inject(REGISTRY.DrawToolkit) drawtoolkit:DrawToolkit\n    @Ref('spectrum') readonly canvasspec!: HTMLCanvasElement\n    @Ref('wrapper-spectrum') readonly wrapperSpectrum!:HTMLDivElement\n    @Ref('hover') readonly canvashov!:HTMLCanvasElement\n\n    private sample:AudioBuffer\n    private data:Float64Array\n    private originalFFT:SpectrumPoint[]\n    private filteredFFT:SpectrumPoint[]\n    private spectralPeaks:number[]\n    private graphicFreq: number[] = [100, 1000, 10000]\n    private textFreq:string[] = ['100', '1k', '10k'] // frequency references\n    public hover : boolean = true\n    private freqBox : FreqBox\n    private infoPanel: Panel\n    private mainPanel: Panel\n    private sampleON:boolean = false // manage mousehover when sample is still loading/offline/not loaded yet\n    private minFreq:number = 20\n    private maxFreq:number = 20000\n    private freqRange:number[] = [40, 10000]\n    private log:boolean = true\n\n    mounted () {\n      this.mainPanel = this.drawtoolkit.setUp(this.canvasspec, 1)\n      this.infoPanel = this.drawtoolkit.setUp(this.canvashov, 0.5)\n      this.mouseHandler()\n\n      this.store.sample().subscribe(ab => {\n        if (ab) {\n          this.mainPanel.reset()\n          this.infoPanel.reset()\n\n          this.maxFreq = ab.sampleRate / 2\n          this.freqRange = [40, this.maxFreq]\n          this.sample = ab\n\n          this.store.getFFT().pipe(find(x => x != null)).subscribe(fft => {\n            if (fft) {\n              this.originalFFT = fft\n              this.store.getSpectralPeaks().pipe(find(x => x != null)).subscribe(sp => {\n                if (sp) {\n                  this.spectralPeaks = sp\n                  this.drawSpectrum()\n                }\n              })\n            }\n          })\n        }\n      })\n    }\n\n    drawSpectrum () {\n      this.mainPanel.reset()\n      this.infoPanel.reset()\n\n      this.freqBox = new FreqBox('', '', 0, 0, false)\n      this.infoPanel.add(this.freqBox)\n\n      this.filteredFFT = this.originalFFT.filter(x => x.frequency < this.freqRange[1]) // linear works, checked with Matlab\n      if (!this.log) {\n        this.filteredFFT = this.filteredFFT.filter(x => x.frequency > this.freqRange[0])\n      }\n      let spectra = new Spectra(this.filteredFFT, this.freqRange[0], this.log)\n      this.mainPanel.add(spectra)\n      let axis = new Axis(this.textFreq, this.graphicFreq, this.filteredFFT, this.freqRange[1], this.freqRange[0], this.log)\n      this.mainPanel.add(axis)\n      this.mainPanel.redraw()\n\n      this.spectralPeaks.forEach(peak => {\n        // peak is in Hz, convert to log position\n        const start = this.filteredFFT.findIndex(x => x.frequency > this.freqRange[0]) // select next bin\n        const xbin = this.filteredFFT.findIndex(x => x.frequency > peak)\n        const xpos = xbin / this.filteredFFT.length\n        if (this.log) {\n          const o = new Line('red', 2, xpos, true, start, this.filteredFFT.length)\n          this.infoPanel.add(o)\n        } else {\n          const o = new Line('red', 2, xpos, true)\n          this.infoPanel.add(o)\n        }\n\n        this.sampleON = true\n      })\n      this.infoPanel.redraw()\n    }\n\n    // mouse event handler\n    mouseHandler () {\n      if (this.wrapperSpectrum) {\n        this.wrapperSpectrum.addEventListener('mousemove', this.onMouseMove)\n      }\n    }\n\n    onMouseMove (e: MouseEvent) {\n      if (this.freqBox && this.hover && this.sampleON) {\n        this.freqBox.xpos = e.offsetX * this.canvashov.width / this.canvashov.offsetWidth\n        this.freqBox.ypos = e.offsetY\n        this.freqBox.visible = true\n\n        const start = this.filteredFFT.findIndex(x => x.frequency > this.freqRange[0])\n        const sizing = virtualCanvas(this.canvashov.width, start, this.filteredFFT.length)\n\n        // Inversion of line.ts:35\n        let f = Math.exp((this.freqBox.xpos - sizing.width - sizing.offset) * Math.log(sizing.width) / sizing.width) * (this.sample.sampleRate / 2)\n\n        this.freqBox.freq = f.toFixed(2).toString() + ' Hz'\n\n        this.infoPanel.redraw()\n      }\n    }\n    hide () {\n      if (this.freqBox) {\n        this.freqBox.visible = false\n        this.infoPanel.redraw()\n      }\n    }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpectrumPresenter.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpectrumPresenter.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./SpectrumPresenter.vue?vue&type=template&id=29f230be&scoped=true&\"\nimport script from \"./SpectrumPresenter.vue?vue&type=script&lang=ts&\"\nexport * from \"./SpectrumPresenter.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./SpectrumPresenter.vue?vue&type=style&index=0&id=29f230be&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"29f230be\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{staticClass:\"mx-auto col-12\"},[_c('v-card-title',[_c('v-icon',{attrs:{\"large\":\"\",\"left\":\"\",\"color\":\"orange darken-2\"}},[_vm._v(\"fab fa-itunes-note\")]),_c('span',{staticClass:\"title font-weight-light\"},[_vm._v(\"Overtones presenter\")])],1),_c('v-card-text',[_vm._v(\"This is going to draw a pentagram with the overtones of the sound loaded.\")]),_c('div',{ref:\"scoreh\",staticStyle:{\"background-color\":\"white\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport * as Vex from 'vexflow'\nimport { inject } from 'inversify-props'\nimport { REGISTRY } from '@/ioc/registry'\nimport { Store } from '@/services/store/store'\nimport { NoteFrequencyProvider } from '../../services/providers/note-frequency'\nimport { Component, Ref } from 'vue-property-decorator'\nimport { EssentiaSpectralExtractor } from '@/services/spectral-extractor/essentia-spectral-extractor'\n\n@Component\nexport default class OvertonesPresenter extends Vue {\n    @Ref('scoreh') score!:HTMLDivElement\n    @inject(REGISTRY.Store) store:Store\n    @inject(REGISTRY.NoteFrequencyProvider) notemgt:NoteFrequencyProvider\n    @inject(REGISTRY.SpectralExtractor) spectralExtractor: EssentiaSpectralExtractor;\n\n    private notes:String[]\n    private TREBLE:Vex.Flow.Stave\n    private ALTO:Vex.Flow.Stave\n    private BASS:Vex.Flow.Stave\n    private ctx:Vex.IRenderContext\n    private renderer:Vex.Flow.Renderer\n\n    mounted () {\n      this.renderer = new Vex.Flow.Renderer(this.score, Vex.Flow.Renderer.Backends.SVG)\n      this.renderer.resize(1400, 350)\n      this.freshSVG()\n\n      this.store.getSpectralPeaks().subscribe(peaks => {\n        if (peaks) {\n          this.ctx.clear()\n          this.freshSVG()\n          this.notes = [] // empty the global variable\n\n          this.notes = peaks.map(a => this.notemgt.freqToNote(a))\n          this.drawTones(this.ctx)\n        }\n      })\n    }\n\n    drawTones (ctx:Vex.IRenderContext) {\n      var notesBASS:Vex.Flow.StaveNote[] = []\n      var notesTREBLE:Vex.Flow.StaveNote[] = []\n      var notesALTO:Vex.Flow.StaveNote[] = []\n\n      this.notes.forEach(n => {\n        let oct = n.substring(n.length - 1) // octave 4-5-6\n        let val = n.substring(0, n.length - 1) // note value C-D-E\n        let myclef = this.clefS(oct) // string of the clef\n        let clefref = this.clefRef(oct)\n        var vexn = new Vex.Flow.StaveNote({ clef: myclef, keys: [val + '/' + oct], duration: '1' })\n\n        switch (myclef) {\n          case ('alto') : notesALTO.push(vexn); break\n          case ('treble') : notesTREBLE.push(vexn); break\n          default: notesBASS.push(vexn)\n        }\n      })\n\n      let voiceB = new Vex.Flow.Voice({ num_beats: 4, beat_value: 4 }).setMode(2).addTickables(notesBASS)\n      let voiceT = new Vex.Flow.Voice({ num_beats: 4, beat_value: 4 }).setMode(2).addTickables(notesTREBLE)\n      let voiceA = new Vex.Flow.Voice({ num_beats: 4, beat_value: 4 }).setMode(2).addTickables(notesALTO)\n      let formatter = new Vex.Flow.Formatter().format([voiceB, voiceT, voiceA], 250)\n      voiceB.draw(ctx, this.BASS)\n      voiceT.draw(ctx, this.TREBLE)\n      voiceA.draw(ctx, this.ALTO)\n    }\n\n    clefS (oct:string):string {\n      switch (oct) {\n        case '5': case '6': return 'treble'\n        case '4': case '3': return 'alto'\n        default: return 'bass'\n      }\n    }\n\n    clefRef (oct:string):Vex.Flow.Stave {\n      switch (oct) {\n        case '5': case '6': return this.TREBLE\n        case '4': case '3': return this.ALTO\n        default: return this.BASS\n      }\n    }\n\n    freshSVG () {\n      this.ctx = this.renderer.getContext()\n\n      this.TREBLE = new Vex.Flow.Stave(10, 40, 800)\n      this.TREBLE.addClef('treble')\n      this.TREBLE.setContext(this.ctx).draw()\n      this.ALTO = new Vex.Flow.Stave(10, 120, 800)\n      this.ALTO.addClef('alto')\n      this.ALTO.setContext(this.ctx).draw()\n      this.BASS = new Vex.Flow.Stave(10, 200, 800)\n      this.BASS.addClef('bass')\n      this.BASS.setContext(this.ctx).draw()\n\n      return this.renderer.getContext()\n    }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OvertonesPresenter.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./OvertonesPresenter.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./OvertonesPresenter.vue?vue&type=template&id=de93f5e8&\"\nimport script from \"./OvertonesPresenter.vue?vue&type=script&lang=ts&\"\nexport * from \"./OvertonesPresenter.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{staticClass:\"mx-auto col-12 mt-5 space-around\"},[_c('v-card-title',[_c('v-icon',{attrs:{\"large\":\"\",\"left\":\"\"}}),_c('span',{staticClass:\"title font-weight-light\"},[_vm._v(\"Suggested voicing\")])],1),_c('v-card-text',[_vm._v(\" Suggested voicing for specific sound loaded \"),_c('ul',_vm._l((_vm.voicings),function(voicing,i){return _c('li',{key:i},[_vm._v(_vm._s(voicing.group)+\" - \"+_vm._s(voicing.name)+\" - \"+_vm._s(voicing.chord))])}),0)]),_c('div',{ref:\"scorevoice\",staticStyle:{\"background-color\":\"white\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport { Component, Ref } from 'vue-property-decorator'\nimport { inject } from 'inversify-props'\nimport { REGISTRY } from '@/ioc/registry'\nimport { Store } from '@/services/store/store'\nimport * as Vex from 'vexflow'\n\nexport interface VoicingDefinition{\n  group:string\n  chord: number[]\n  name: string\n}\n\n@Component\nexport default class VoicingsPresenter extends Vue {\n  @inject(REGISTRY.Store) store:Store\n  @Ref('scorevoice') scorev:HTMLDivElement\n  public renderer:Vex.Flow.Renderer\n  public voicings:VoicingDefinition[] = []\n  public rhRender:Vex.Flow.StaveNote[] = [] // right hand voicing\n  public lhRender:Vex.Flow.StaveNote[] = [] // left hand voicing\n  public CENTRAL_NOTE = 0\n  public DEFAULT_OCTAVE = 4\n  private TREBLE:Vex.Flow.Stave\n  private BASS:Vex.Flow.Stave\n  private ctx:Vex.IRenderContext\n\n  private SCALE = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B']\n\n  private definitions = [\n    { group: 'min7', chord: [0, 3, 10], name: '1 - b3 - b7 (no fifth)' },\n    { group: 'min7', chord: [-9, -2, 0], name: '1st inversion (b3 as bass)' },\n    { group: 'min7', chord: [-5, 0, 3, 10], name: '2nd inversion (5th as bass)' },\n    { group: 'min7', chord: [-2, 0, 3], name: '3rd inversion (7th as bass)' },\n    { group: 'maj7', chord: [0, 4, 10], name: '1 - 3 - 7 (no fifth)' },\n    { group: 'maj7', chord: [-8, -1, 0], name: '1st inversion (3 as bass)' },\n    { group: 'maj7', chord: [-5, 0, 4, 11], name: ' 2nd inversion (5th as bass)' },\n    { group: 'maj7', chord: [-1, 0, 4], name: '3rd inversion (7th as bass)' },\n    { group: 'dom7', chord: [0, 4, 10], name: '1 - 3 - b7 (no fifth)' },\n    { group: 'dom7', chord: [-8, -2, 0], name: '1st inversion (3 as bass)' },\n    { group: 'dom7', chord: [-5, 0, 4, 10], name: '2nd inversion (5th as bass)' },\n    { group: 'dom7', chord: [-2, 0, 4], name: '3rd inversion (7th as bass)' }\n  ]\n\n  mounted () { // draw the lines\n    this.renderer = new Vex.Flow.Renderer(this.scorev, Vex.Flow.Renderer.Backends.SVG)\n    this.renderer.resize(1400, 350)\n    this.freshSVG()\n\n    this.store.getHCPC().subscribe(hcpc => {\n      if (hcpc) {\n        this.ctx.clear()\n        this.freshSVG()\n\n        // empty all the global variables on new sample loaded\n        this.voicings = []\n        this.rhRender = []\n        this.lhRender = []\n\n        const foundamental = hcpc.reduce((iMax, x, i, arr) => x > arr[iMax] ? i : iMax, 0) // find the max index\n        const voicings = this.definitions.map(x => {\n          return { chord: x, score: x.chord.map(y => hcpc[(y + 12 + foundamental) % 12]).reduce((x, y) => x + y) }\n        }).sort((x, y) => y.score - x.score).slice(0, 3)\n        this.voicings = voicings.map(x => x.chord)\n        this.createChords()\n        this.drawChords()\n      }\n    })\n  }\n\n  private toNote (note:number):string { // return a string representation of the note\n    let idx = note + this.CENTRAL_NOTE\n\n    if (idx < 0) {\n      return this.SCALE[mod(idx, 12)] + '/' + (this.DEFAULT_OCTAVE - 1).toString()// below octave\n    } if (idx >= 12) {\n      return this.SCALE[mod(idx, 12)] + '/' + (this.DEFAULT_OCTAVE + 1).toString() // octave above\n    } else {\n      return this.SCALE[mod(idx, 12)] + '/' + (this.DEFAULT_OCTAVE).toString() // same octave\n    }\n  }\n\n  private hasModifier (note:number):boolean { // return a string representation of the note\n    let idx = note + this.CENTRAL_NOTE\n    return this.SCALE[mod(idx, 12)].length > 1\n  }\n\n  private createChords () { // all the notes within the chord in semitone distances\n    let chords = this.voicings.map(a => a.chord)\n    chords.forEach(chord => { // for each chord\n      let notestr:string[] = []\n\n      chord.forEach(note => { // for each note within the chord\n        notestr.push(this.toNote(note))\n      }) // once got the names of the note in an array of strings add the stavenote object to an array\n\n      const modifiers = chord.map(this.hasModifier)\n\n      let c = new Vex.Flow.StaveNote({ clef: 'treble',\n        keys: [...notestr.slice(1)],\n        duration: '1' })\n\n      const staveNote = modifiers.slice(1).forEach((hasModifier, i) => {\n        if (hasModifier) {\n          return c.addAccidental(i, new Vex.Flow.Accidental('#'))\n        }\n      })\n\n      this.rhRender.push(c)\n      this.lhRender.push(new Vex.Flow.StaveNote({ clef: 'bass', keys: [notestr[0]], duration: '1' }))\n    })\n  }\n\n  private drawChords () {\n    // Create a voice in free mode and add the notes from above\n    let voiceT = new Vex.Flow.Voice({ num_beats: 4, beat_value: 4 }).setMode(2)\n    voiceT.addTickables(this.rhRender)\n    let voiceA = new Vex.Flow.Voice({ num_beats: 4, beat_value: 4 }).setMode(2)\n    voiceA.addTickables(this.lhRender)\n\n    // Format and justify the notes to 400 pixels.\n    var formatter = new Vex.Flow.Formatter().joinVoices([voiceT]).format([voiceT, voiceA], 400)\n\n    // Render voice\n    voiceA.draw(this.ctx, this.BASS)\n    voiceT.draw(this.ctx, this.TREBLE)\n  }\n\n  private freshSVG () {\n    this.ctx = this.renderer.getContext()\n    this.TREBLE = new Vex.Flow.Stave(25, 0, 600)\n    this.TREBLE.addClef('treble')\n    this.TREBLE.setContext(this.ctx).draw()\n    this.BASS = new Vex.Flow.Stave(25, 120, 600)\n    this.BASS.addClef('bass')\n    this.BASS.setContext(this.ctx).draw()\n\n    new Vex.Flow.StaveConnector(this.TREBLE, this.BASS).setType(3).setContext(this.ctx).draw() // 3 = brace\n    new Vex.Flow.StaveConnector(this.TREBLE, this.BASS).setType(1).setContext(this.ctx).draw()\n    new Vex.Flow.StaveConnector(this.TREBLE, this.BASS).setType(6).setContext(this.ctx).draw()\n\n    return this.renderer.getContext()\n  }\n\n  private redrawStave () {\n    this.renderer.getContext().clear()\n    this.freshSVG()\n    this.rhRender = []\n    this.lhRender = []\n\n    this.createChords()\n    this.drawChords()\n  }\n}\n\nfunction mod (n:number, m:number) {\n  return ((n % m) + m) % m\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VoicingsPresenter.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VoicingsPresenter.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./VoicingsPresenter.vue?vue&type=template&id=5e95cc2c&\"\nimport script from \"./VoicingsPresenter.vue?vue&type=script&lang=ts&\"\nexport * from \"./VoicingsPresenter.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"col-12\"},[_c('v-row',{attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('v-card',{staticClass:\"mx-auto col-10 mb-5 center\"},[_c('h2',[_vm._v(\"HPCP\")]),_c('div',{staticClass:\"chart\"},[_c('canvas',{ref:\"chart\",staticClass:\"chart\",attrs:{\"height\":\"285\"}})])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport { Component, Ref } from 'vue-property-decorator'\nimport { inject } from 'inversify-props'\nimport { REGISTRY } from '@/ioc/registry'\nimport { Store } from '@/services/store/store'\nimport { Chart } from 'chart.js'\n\n@Component\nexport default class HPCPPresenter extends Vue {\n    private chart:Chart\n\n    @Ref('chart') readonly canvasChart!: HTMLCanvasElement\n\n    @inject(REGISTRY.Store) store:Store\n\n    mounted () {\n      var ctx = this.canvasChart.getContext('2d')\n      if (ctx) {\n        this.chart = new Chart(ctx, {\n          type: 'bar',\n          data: {\n            labels: ['A', 'A#', 'B', 'C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#'],\n            datasets: [{\n              label: 'Note',\n              data: [],\n              backgroundColor: 'rgba(54, 162, 235, 0.2)',\n              borderColor: 'rgba(54, 162, 235, 1)',\n              borderWidth: 1\n            }]\n          },\n          options: {\n            scales: {\n              yAxes: [{\n                ticks: {\n                  beginAtZero: true\n                }\n              }]\n            }\n          }\n        })\n      }\n\n      this.store.getHCPC().subscribe(hcpc => {\n        if (this.chart) {\n          if (this.chart.data.datasets) {\n            this.chart.data.datasets.forEach((dataset:any) => {\n              dataset.data = hcpc || []\n            })\n            this.chart.update()\n          }\n        }\n      })\n    }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HPCPPresenter.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HPCPPresenter.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./HPCPPresenter.vue?vue&type=template&id=1aef5a7a&scoped=true&\"\nimport script from \"./HPCPPresenter.vue?vue&type=script&lang=ts&\"\nexport * from \"./HPCPPresenter.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./HPCPPresenter.vue?vue&type=style&index=0&id=1aef5a7a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1aef5a7a\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport { Component } from 'vue-property-decorator'\nimport SpectrumPresenter from './SpectrumPresenter.vue'\nimport OvertonesPresenter from './OvertonesPresenter.vue'\nimport VoicingsPresenter from './VoicingsPresenter.vue'\nimport HPCPPresenter from './HPCPPresenter.vue'\n\n@Component({\n  components: {\n    SpectrumPresenter,\n    OvertonesPresenter,\n    VoicingsPresenter,\n    HPCPPresenter\n  }\n})\nexport default class HarmonicStructure extends Vue {\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HarmonicStructure.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./HarmonicStructure.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./HarmonicStructure.vue?vue&type=template&id=3a363e80&scoped=true&\"\nimport script from \"./HarmonicStructure.vue?vue&type=script&lang=ts&\"\nexport * from \"./HarmonicStructure.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"3a363e80\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{attrs:{\"fluid\":\"\"}},[_c('WaveformPresenter'),_c('v-row',[_c('SchemaPresenter')],1),_c('v-row',[_c('SignaturesPresenter')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',{staticClass:\"col-12\"},[_c('v-row',{attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('v-card',{staticClass:\"mx-auto col-10 mt-5 space-around\"},[_c('div',{ref:\"canvas-wrapper\",staticClass:\"wrapper\",on:{\"mouseover\":function($event){_vm.hover = true},\"mouseleave\":_vm.hide,\"click\":_vm.skip}},[_c('canvas',{ref:\"waveform\",staticClass:\"waveform\"}),_c('canvas',{ref:\"waveformchild\",staticClass:\"waveform\"})])])],1),_c('v-row',{attrs:{\"align\":\"center\",\"justify\":\"center\"}},[_c('AudioPlayer'),_c('Legend')],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-container',[_c('v-row',{staticClass:\"col-12 py-0\",attrs:{\"align-content\":\"center\",\"justify\":\"center\",\"dense\":\"\"}},[_c('v-col',{attrs:{\"cols\":\"1\"}},[_c('v-btn',{attrs:{\"text\":\"\",\"icon\":\"\",\"color\":\"#1976D2\"},on:{\"click\":function($event){_vm.playing ? _vm.pause() : _vm.play()}}},[(!_vm.playing || _vm.paused)?_c('v-icon',{attrs:{\"x-small\":\"\"}},[_vm._v(\"fas fa-play\")]):_c('v-icon',{attrs:{\"x-small\":\"\"}},[_vm._v(\"fas fa-pause\")])],1)],1),_c('v-col',{attrs:{\"cols\":\"1\"}},[_c('v-btn',{attrs:{\"text\":\"\",\"icon\":\"\",\"color\":\"#1976D2\"},on:{\"click\":function($event){return _vm.mute()}}},[_c('v-icon',{attrs:{\"x-small\":\"\"}},[_vm._v(\"fas fa-volume-up\")])],1)],1),_c('v-col',{attrs:{\"cols\":\"4\"}},[_c('v-slider',{attrs:{\"dark\":\"\",\"dense\":\"\",\"color\":\"#1976D2\",\"max\":\"1\",\"min\":\"0\",\"step\":\".1\"},on:{\"change\":_vm.changeVolume},model:{value:(_vm.volume),callback:function ($$v) {_vm.volume=$$v},expression:\"volume\"}})],1)],1),_c('v-row',{staticClass:\"pt-0\",attrs:{\"justify\":\"center\"}},[_c('v-slider',{attrs:{\"color\":\"#1976D2\",\"label\":(_vm.sampletime * _vm.samplelng / 100).toFixed(3)  + ' : ' +  _vm.samplelng.toFixed(3)},on:{\"click\":_vm.skip},model:{value:(_vm.sampletime),callback:function ($$v) {_vm.sampletime=$$v},expression:\"sampletime\"}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport { Component } from 'vue-property-decorator'\nimport { inject } from 'inversify-props'\nimport { REGISTRY } from '@/ioc/registry'\nimport { Store } from '@/services/store/store'\nimport { AudioContextProvider } from '../../services/providers/context-provider'\n\n@Component\nexport default class AudioPlayer extends Vue {\n    private playing: boolean = false\n    private paused: boolean = true\n    private volume: number = 1\n    private sampletime: number = 0 // is going to change according to sample length (in ms?)\n\n    @inject(REGISTRY.Store) store:Store\n    @inject(REGISTRY.AudioContextProvider) ctxprovider:AudioContextProvider\n    private ctx = this.ctxprovider.context()\n    private source : AudioBufferSourceNode = this.ctx.createBufferSource()\n    private rate : number = this.ctx.sampleRate\n    private gain : GainNode\n    private samplelng : number = 0\n\n    private sample:AudioBuffer\n\n    private startplayingtime = 0;\n    private pausedAt = 0;\n    private interval:NodeJS.Timeout\n\n    mounted () {\n      this.store.skipped().subscribe(p => {\n        if (p) {\n          if (this.playing) {\n            this.pause()\n            this.onEnd()\n            this.sampletime = p\n            this.pausedAt = this.samplelng * p / 100\n            this.play()\n          } else {\n            this.sampletime = p\n            this.pausedAt = this.samplelng * p / 100\n            this.store.nextPlayEvent({ status: false, elapsed: this.pausedAt, length: this.samplelng })\n          }\n        }\n      })\n    }\n    private newSample (ab:AudioBuffer | null) {\n      if (ab) {\n        if (this.playing) {\n          this.pause()\n        }\n        this.sampletime = 0\n        this.pausedAt = 0\n        this.sample = ab\n        this.restore()\n        this.samplelng = ab.length / this.rate\n      }\n    }\n\n    created () {\n      this.setup()\n    }\n\n    onEnd () {\n      this.playing = false\n      clearInterval(this.interval)\n      this.restore()\n    }\n\n    play () {\n      this.paused = false\n      this.playing = true\n\n      this.startplayingtime = this.ctxprovider.context().currentTime\n      if (this.sampletime === 0) {\n        this.source.start()\n      }\n      if (this.sampletime > 0) {\n        this.source.start(0, this.pausedAt)\n      }\n\n      this.interval = setInterval(() => {\n        const elapsed = this.ctxprovider.context().currentTime - this.startplayingtime + this.pausedAt\n        this.sampletime = Math.ceil(elapsed / this.samplelng * 100)\n        this.store.nextPlayEvent({ status: this.playing, length: this.samplelng, elapsed: elapsed })\n        if (elapsed > this.samplelng) {\n          this.onEnd()\n          this.pausedAt = 0\n          this.sampletime = 0\n          this.store.nextPlayEvent({ status: false, elapsed: 0, length: this.samplelng })\n        }\n      }, 50)\n    }\n\n    pause () {\n      clearInterval(this.interval)\n      this.paused = true\n      this.playing = false\n      this.source.stop()\n      this.pausedAt = this.ctxprovider.context().currentTime - this.startplayingtime + this.pausedAt\n      this.store.nextPlayEvent({ length: this.samplelng, status: false, elapsed: this.pausedAt })\n\n      this.restore()\n    }\n\n    mute () {\n      if (this.volume !== 0) {\n        this.volume = 0\n        this.gain.gain.setValueAtTime(this.volume, this.ctx.currentTime)\n      } else {\n        this.volume = 0.25\n        this.gain.gain.setValueAtTime(this.volume, this.ctx.currentTime)\n      }\n    }\n\n    changeVolume () {\n      this.gain.gain.setValueAtTime(this.volume, this.ctx.currentTime)\n    }\n\n    restore () {\n      this.source = this.ctx.createBufferSource()\n      this.source.buffer = this.sample\n      this.source.connect(this.gain)\n    }\n\n    setup () {\n      this.gain = this.ctx.createGain()\n      this.gain.gain.setValueAtTime(this.volume, this.ctx.currentTime)\n      this.store.sample().subscribe(this.newSample)\n      this.source.connect(this.gain)\n      this.gain.connect(this.ctx.destination)\n    }\n\n    skip () {\n      let pos = this.sampletime\n      this.store.nextSkipped(pos)\n    }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioPlayer.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AudioPlayer.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./AudioPlayer.vue?vue&type=template&id=3ead5a30&\"\nimport script from \"./AudioPlayer.vue?vue&type=script&lang=ts&\"\nexport * from \"./AudioPlayer.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"text-center\"},[_c('v-dialog',{scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\nvar on = ref.on;\nreturn [_c('v-btn',_vm._g({attrs:{\"color\":\"blue\",\"dark\":\"\"}},on),[_vm._v(\" Legend \")])]}}]),model:{value:(_vm.dialog),callback:function ($$v) {_vm.dialog=$$v},expression:\"dialog\"}},[_c('v-card',[_c('v-card-title',{staticClass:\"headline grey lighten-2\",attrs:{\"primary-title\":\"\"}},[_vm._v(\" Legend \")]),_c('v-card-text',[_c('v-list-item',{attrs:{\"color\":\"blue\"}},[_c('v-icon',{staticClass:\"fas fa-square-full\",attrs:{\"color\":\"green\"}}),_c('v-list-item-title',[_vm._v(\" Peaks \")]),_c('v-icon',{staticClass:\"fas fa-square-full\",attrs:{\"color\":\"red\"}}),_c('v-list-item-title',[_vm._v(\" Playing sample \")]),_c('v-icon',{staticClass:\"fas fa-square-full\",attrs:{\"color\":\"yellow\"}}),_c('v-list-item-title',[_vm._v(\" Polyrhythm \")])],1)],1),_c('v-divider'),_c('v-card-actions',[_c('v-spacer'),_c('v-btn',{attrs:{\"color\":\"yellow\",\"text\":\"\"},on:{\"click\":function($event){_vm.dialog = false}}},[_vm._v(\" Close \")])],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport { Component } from 'vue-property-decorator'\n\n@Component\nexport default class Legend extends Vue {\n    private dialog:boolean = false\n}\n\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Legend.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Legend.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Legend.vue?vue&type=template&id=36d4799e&\"\nimport script from \"./Legend.vue?vue&type=script&lang=ts&\"\nexport * from \"./Legend.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { Drawable } from '@/services/providers/draw-toolkit'\n\nexport class Waveform implements Drawable {\n    data:number[]\n\n    constructor (data:number[]) {\n      this.data = data\n    }\n\n    draw (ctx:CanvasRenderingContext2D, canvas:HTMLCanvasElement) {\n      ctx.translate(0, canvas.height / 2) // Set Y = 0 to be in the middle of the canvas\n\n      const width = canvas.width / this.data.length\n\n      const height = canvas.height\n      const padding = 10\n      for (let i = 0; i < this.data.length; i++) {\n        let x = i * width\n        let y = this.data[i] * (height / 2) - padding\n\n        this.strokeLine(ctx, x, y)\n      }\n      ctx.translate(0, -(canvas.height / 2)) // Bring back Y = 0 to be in top of the canvas to match standards\n    }\n\n    strokeLine (ctx : CanvasRenderingContext2D, x : number, y : number) {\n      ctx.lineWidth = 1\n      ctx.strokeStyle = '#1976D2'\n      ctx.beginPath()\n      ctx.moveTo(x, 0)\n      ctx.lineTo(x, -y)\n      ctx.lineTo(x, y)\n      ctx.stroke()\n    }\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport AudioPlayer from './AudioPlayer.vue'\nimport Legend from './Legend.vue'\n\nimport { Component, Ref } from 'vue-property-decorator'\nimport { inject } from 'inversify-props'\nimport { REGISTRY } from '@/ioc/registry'\nimport { Store } from '@/services/store/store'\nimport { AudioContextProvider } from '../../services/providers/context-provider'\nimport { TimeInterval } from 'rxjs'\nimport { DrawToolkit, Panel } from '../../services/providers/draw-toolkit'\nimport { Line } from '@/drawables/line'\nimport { Waveform } from '@/drawables/waveform'\nimport { Axis } from '@/drawables/axis'\nimport { EssentiaTimeExtractor } from '@/services/time-extractor/essentia-time-extractor'\nimport { Quantizer } from '../../services/providers/quantizer'\nimport { TimeExtractor } from '../../services/time-extractor/time-extractor'\n\n@Component({\n  components: { AudioPlayer,\n    Legend\n  }\n})\nexport default class WaveformPresenter extends Vue {\n  @inject(REGISTRY.Store) store:Store\n  @inject(REGISTRY.DrawToolkit) drawtoolkit:DrawToolkit\n  @inject(REGISTRY.Quantizer) quantizer:Quantizer\n  @Ref('waveform') readonly canvasdom!: HTMLCanvasElement\n  @Ref('waveformchild') readonly canvasalpha!: HTMLCanvasElement\n  @Ref('canvas-wrapper') readonly canvasWrapper!:HTMLDivElement\n\n  private dialog:boolean = false\n  private dataArray : Uint8Array\n  private data : number[]\n  private samplerate:number\n  private inverseRatio:number\n  public hover : boolean\n  private GLOBALALPHA : number = 0.7;\n  private bars = 800 // number of bars to plot\n  private previousInterval : NodeJS.Timeout\n  private previousblock : number = 0\n  private playingCursor:Line\n  private mouseCursor:Line\n  private mainPanel:Panel\n  private infoPanel:Panel\n  private polyLines:number = 0\n\n  mounted () { // access canvas\n    this.mainPanel = this.drawtoolkit.setUp(this.canvasdom, 1)\n    this.infoPanel = this.drawtoolkit.setUp(this.canvasalpha, this.GLOBALALPHA)\n\n    this.mouseHandler()\n\n    this.store.sample().subscribe(s => {\n      this.mainPanel.reset()\n      if (s) {\n        const channel = this.store.channelData()\n        this.data = this.quantizer.lin(Array.from(channel), this.bars)\n        let waveform = new Waveform(this.data)\n        this.mainPanel.add(waveform)\n        this.mainPanel.redraw()\n\n        this.samplerate = s.sampleRate\n        this.inverseRatio = 1 / s.duration\n        this.store.timeAnalysis().subscribe(te => {\n          this.setUpInfoPanel()\n          if (te) { // pass 32float array\n            te.peaks.forEach(peak => {\n              let xpos = peak * this.inverseRatio\n              let o = new Line('green', 2, xpos, true)\n              this.infoPanel.add(o)\n            })\n          }\n          this.infoPanel.redraw()\n        })\n      }\n    })\n\n    this.store.playing().subscribe(p => {\n      this.playingCursor.x = p.elapsed / p.length\n      this.playingCursor.visible = true\n      this.infoPanel.redraw()\n    })\n\n    this.store.skipped().subscribe(p => {\n      if (p) {\n        if (this.canvasalpha) {\n          this.playingCursor.visible = true\n          this.playingCursor.x = p / 100\n        }\n      }\n    })\n\n    this.store.getPolyLine().subscribe(val => {\n      if (val) {\n        if (this.canvasalpha) {\n          this.polyLines += val.length\n          val.forEach(v => {\n            let xpos = v * this.inverseRatio\n            let l = new Line('yellow', 3, xpos, true)\n            this.infoPanel.add(l)\n          })\n          this.infoPanel.redraw()\n        }\n      }\n    })\n\n    this.$root.$on('clearpoly', () => {\n      if (this.polyLines > 0) { // custom event to clear polyrythmic canvas\n        for (let i = 0; i <= this.polyLines; i++) {\n          this.infoPanel.remove()\n        }\n      }\n      this.polyLines = 0\n      this.infoPanel.redraw()\n    })\n  }\n\n  private setUpInfoPanel () {\n    this.infoPanel.reset()\n    this.playingCursor = new Line('red', 3, 0, false)\n    this.mouseCursor = new Line('orange', 3, 0, false)\n    this.infoPanel.add(this.playingCursor)\n    this.infoPanel.add(this.mouseCursor)\n  }\n\n  // ANIMATION WITH MOUSE OVER\n  mouseHandler () {\n    if (this.canvasWrapper) {\n      this.canvasWrapper.addEventListener('mousemove', this.onMouseMove)\n    }\n  }\n\n  onMouseMove (e: MouseEvent) {\n    if (this.hover) {\n      this.mouseCursor.x = e.offsetX / this.canvasalpha.offsetWidth\n      this.mouseCursor.visible = true\n      this.infoPanel.redraw()\n    }\n  }\n\n  hide () {\n    this.mouseCursor.x = 0\n    this.mouseCursor.visible = false\n    this.infoPanel.redraw()\n  }\n\n  // click event managing, skips to another sample\n  skip (e: MouseEvent) {\n    let pos = Math.floor(e.offsetX / this.canvasalpha.offsetWidth * 100)\n    this.store.nextSkipped(pos)\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WaveformPresenter.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./WaveformPresenter.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./WaveformPresenter.vue?vue&type=template&id=298b5f30&scoped=true&\"\nimport script from \"./WaveformPresenter.vue?vue&type=script&lang=ts&\"\nexport * from \"./WaveformPresenter.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./WaveformPresenter.vue?vue&type=style&index=0&id=298b5f30&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"298b5f30\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{staticClass:\"mx-auto col-12 mt-5 space-around\"},[_c('v-card-title',[_c('v-icon',{attrs:{\"large\":\"\",\"left\":\"\"}}),_c('span',{staticClass:\"title font-weight-light\"},[_vm._v(\"Rythmic schema\")])],1),_c('div',{ref:\"score\",staticStyle:{\"background-color\":\"white\"}}),_c('div',{staticClass:\"mb-6 col-12 d-flex justify-space-around\"},_vm._l(((this.r1*this.r2)),function(i){return _c('v-chip',{key:i,attrs:{\"color\":_vm.colorMask(_vm.color1,_vm.mask1[i])}},[_vm._v(\"x\")])}),1),_c('div',{staticClass:\"mb-6 col-12 d-flex justify-space-around\"},_vm._l(((this.r1*this.r2)),function(i){return _c('v-chip',{key:i+10,attrs:{\"color\":_vm.colorMask(_vm.color2,_vm.mask2[i])}},[_vm._v(\" x\")])}),1),_c('v-card-text',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.r1),expression:\"r1\",modifiers:{\"number\":true}}],staticClass:\"text-center\",attrs:{\"placeholder\":\"?\"},domProps:{\"value\":(_vm.r1)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.r1=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}}),_vm._v(\" against :\"),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.r2),expression:\"r2\",modifiers:{\"number\":true}}],staticClass:\"text-center\",attrs:{\"placeholder\":\"?\"},domProps:{\"value\":(_vm.r2)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.r2=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('v-btn',{on:{\"click\":_vm.drawPoly,\"change\":_vm.clearPoly}},[_vm._v(\" Visualize possible polyrhythm \")]),_c('v-btn',{on:{\"click\":_vm.clearPoly,\"change\":_vm.clearPoly}},[_vm._v(\" Clear all \")])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport { Component, Ref } from 'vue-property-decorator'\nimport * as Vex from 'vexflow'\nimport { NoteElement, QuarterRythm, Note, Quarter } from '@/model/note'\nimport { inject } from 'inversify-props'\nimport { REGISTRY } from '@/ioc/registry'\nimport { Store } from '@/services/store/store'\nimport { Color } from 'vuetify/lib/util/colors'\n\n@Component\nexport default class SchemaPresenter extends Vue {\n  @inject(REGISTRY.Store) store:Store\n  @Ref('score') score!:HTMLDivElement\n\n  r1 :number = 4;\n  r2 :number = 4;\n  peaks:number[] = [];\n  notes: any[] = [];\n  tuplets : any[] = []\n  renderer:Vex.Flow.Renderer;\n  ctx:Vex.IRenderContext\n  polystave:Vex.Flow.Stave\n  mask1:boolean[] = []\n  mask2:boolean[] = []\n  color1:string = 'green'\n  color2:string = 'yellow'\n  POLYACTIVE:boolean = false\n\n  mounted () {\n    this.createMask()\n    this.ctx = this.freshSVG()\n    this.store.timeAnalysis().subscribe(ta => {\n      if (ta) {\n        this.notes = [QuarterRythm] // clear notes with just initial beat\n        this.ctx.clear()\n        this.renderer.getContext().clear()\n        this.peaks = ta.peaks\n        this.peaks.forEach(() => this.notes.push(QuarterRythm))\n\n        this.drawRhythm(this.renderer.getContext(), this.notes, 10, this.r1.toString())\n      }\n    })\n  }\n\n  private freshSVG () {\n    let renderers = new Vex.Flow.Renderer(this.score, Vex.Flow.Renderer.Backends.SVG)\n    this.renderer = renderers\n    // Size our svg:\n    this.renderer.resize(1400, 300)\n    // And get a drawing context:\n    return this.renderer.getContext()\n  }\n\n  private drawRhythm (ctx:Vex.IRenderContext, notes:any[], height:number, signature:string) {\n    const bars = this.splitBars(notes)\n    const width = 400\n    bars.forEach((bar, i) => {\n      if (i === 0) {\n        this.drawBar(bar, 10, height, ctx, stave => stave.addClef('percussion').addTimeSignature(signature + '/' + 4))\n      } else if (i === (bars.length - 1)) {\n        this.drawBar(bar, i * width + 10, height, ctx, stave => stave.setEndBarType(Vex.Flow.Barline.type.END))\n      } else {\n        this.drawBar(bar, i * width + 10, height, ctx)\n      }\n    })\n\n    this.drawBar([], 410, height, ctx)\n  }\n\n  private drawPoly () {\n    this.POLYACTIVE = true\n    this.mask1 = []\n    this.mask2 = []\n    this.createMask()\n    let lng = this.peaks.length\n    let beat = this.peaks[this.r1 - 1] // 4th peak in 4against... , 3rd peak in 3 against\n    let subd = beat / this.r2\n    let idx = 0\n    let array = []\n    let delta4 = this.peaks[1] - this.peaks[0] // separation between beats in any time signature\n    while (idx * subd <= delta4 * (lng)) {\n      array.push(idx * subd)\n      idx++\n    }\n    this.store.addPolyLine(array)\n    this.drawRhythm(this.ctx, this.notes, 120, this.r2.toString())\n  }\n\n  private splitBars (notes:NoteElement[]):NoteElement[][] {\n    const result:NoteElement[][] = [[]]\n    let i = 0\n    notes.forEach(note => {\n      if (result[i].reduce((sum, x) => sum + (x.duration || 0), 0) >= 1) {\n        i++\n        result.push([])\n      }\n      result[i].push(note)\n    })\n    return result\n  }\n\n  private toVexDuration (n:number):string {\n    switch (n) {\n      case 0.25: return '4d'\n      default: return ''\n    }\n  }\n\n  private drawBar (notes:NoteElement[], left:number, height:number, context: Vex.IRenderContext, modifier: (stave:Vex.Flow.Stave) => void = (() => {})):void {\n    var stave = new Vex.Flow.Stave(left, height, 400).setConfigForLines(\n      [false, false, true, false, false].map(function (visible) {\n        return { visible: visible }\n      }))\n\n    modifier(stave)\n    // Connect it to the rendering context and draw!\n    stave.setContext(context).draw()\n\n    const _notes = notes.map(note => {\n      return new Vex.Flow.StaveNote({ clef: 'percussion', keys: ['b/4/x2'], duration: this.toVexDuration(note.duration) })\n    })\n\n    var beams = Vex.Flow.Beam.generateBeams(_notes)\n    Vex.Flow.Formatter.FormatAndDraw(context, stave, _notes)\n    beams.forEach(function (b) { b.setContext(context).draw() })\n  }\n\n  private clearPoly ():void{\n    this.$root.$emit('clearpoly')\n  }\n\n  private createMask () {\n    this.mask1 = []\n    this.mask2 = []\n\n    let mcm = this.r1 * this.r2\n\n    for (let i = 0; i < mcm; i++) {\n      if (i % this.r2 === 0) {\n        this.mask1.push(true)\n      } else { this.mask1.push(false) }\n    }\n\n    for (let i = 0; i < mcm; i++) {\n      if (i % this.r1 === 0) {\n        this.mask2.push(true)\n      } else { this.mask2.push(false) }\n    }\n  }\n\n  colorMask (color:string, mask:boolean) {\n    if (this.POLYACTIVE) {\n      if (mask) return color\n      else return 'grey'\n    } else return 'grey'\n  }\n\n  deactivatePoly () {\n    this.POLYACTIVE = false\n  }\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SchemaPresenter.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SchemaPresenter.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./SchemaPresenter.vue?vue&type=template&id=fb9df38a&\"\nimport script from \"./SchemaPresenter.vue?vue&type=script&lang=ts&\"\nexport * from \"./SchemaPresenter.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-card',{staticClass:\"mx-auto col-12 mt-5 space-around\"},[_c('v-simple-table',{scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('thead',[_c('tr',[_c('th',{staticClass:\"text-left\"},[_vm._v(\"BPM\")]),_c('th',{staticClass:\"text-left\"},[_vm._v(\"Swing\")])])]),_c('tbody',_vm._l((_vm.signatures),function(signature,i){return _c('tr',{key:i},[_c('td',[_vm._v(_vm._s(signature.bpm))]),_c('td',[_vm._v(_vm._s(signature.swing))])])}),0)]},proxy:true}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport { Component } from 'vue-property-decorator'\nimport { inject } from 'inversify-props'\nimport { REGISTRY } from '@/ioc/registry'\nimport { Store } from '@/services/store/store'\nimport { max } from 'rxjs/operators'\n\ninterface TimeSignature{\n  bpm:number,\n  swing: number\n}\n\n@Component\nexport default class SignaturePresenter extends Vue {\n  @inject(REGISTRY.Store) store:Store\n\n  minBpm = 40\n  maxBpm = 320\n\n  swing = 0.05\n  peaks:number[] = []\n\n  signatures:TimeSignature[] = []\n\n  calculateSignatures () {\n    if (this.peaks.length > 1) {\n      const base = this.peaks[0]\n      for (let bpm = this.minBpm; bpm < this.maxBpm; bpm += 0.5) {\n        const quarter = 60 / bpm // quarter length in seconds\n        const swingAmount = quarter * this.swing\n        const swings = this.peaks.map((time, i) => time - (base + i * quarter))\n        const maxSwing = Math.max(...swings.map(x => Math.abs(x)))\n        if (maxSwing < swingAmount) {\n          this.signatures.push({\n            bpm: bpm,\n            swing: maxSwing\n          })\n        }\n      }\n    }\n  }\n\n  created () {\n    this.store.timeAnalysis().subscribe(ta => {\n      this.signatures = []\n      if (ta) {\n        this.peaks = ta.peaks\n        this.calculateSignatures()\n      }\n    })\n  }\n\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SignaturesPresenter.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SignaturesPresenter.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./SignaturesPresenter.vue?vue&type=template&id=8fb6d966&\"\nimport script from \"./SignaturesPresenter.vue?vue&type=script&lang=ts&\"\nexport * from \"./SignaturesPresenter.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport { Component } from 'vue-property-decorator'\nimport WaveformPresenter from './WaveformPresenter.vue'\nimport AudioPlayer from './AudioPlayer.vue'\nimport SchemaPresenter from './SchemaPresenter.vue'\nimport SignaturesPresenter from './SignaturesPresenter.vue'\n\n@Component({\n  components: { WaveformPresenter,\n    AudioPlayer,\n    SchemaPresenter,\n    SignaturesPresenter\n  }\n\n})\nexport default class RhythmicStructure extends Vue {\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RhythmicStructure.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./RhythmicStructure.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./RhythmicStructure.vue?vue&type=template&id=55e0a02f&\"\nimport script from \"./RhythmicStructure.vue?vue&type=script&lang=ts&\"\nexport * from \"./RhythmicStructure.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport Vue from 'vue'\nimport { Component, Prop } from 'vue-property-decorator'\nimport SampleLoader from './components/sidebar/SampleLoader.vue'\nimport HarmonicStructure from './components/harmony/HarmonicStructure.vue'\nimport RhythmicStructure from './components/rhythm/RhythmicStructure.vue'\n// @ts-ignore\nimport Loading from 'vue-loading-overlay'\nimport 'vue-loading-overlay/dist/vue-loading.css'\nimport { inject } from 'inversify-props'\nimport { REGISTRY } from './ioc/registry'\nimport { Store } from './services/store/store'\n\n@Component({\n  components: {\n    SampleLoader,\n    HarmonicStructure,\n    RhythmicStructure,\n    Loading\n  }\n})\nexport default class App extends Vue {\n  @inject(REGISTRY.Store) store:Store\n\n  created () {}\n\n  drawer = false;\n  isLoading = true;\n\n  @Prop(String) source: string;\n\n  mounted () {\n    this.store.loading().subscribe(x => this.isLoading = x)\n  }\n\n  data () {\n    return {\n      currentTab: 'Harmony',\n      tabs: ['Harmony', 'Rhythm']\n    }\n  }\n  computed () {}\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=9aba72f8&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue'\nimport Vuetify from 'vuetify'\nimport 'vuetify/dist/vuetify.min.css'\nimport '@fortawesome/fontawesome-free/css/all.css'\n\nVue.use(Vuetify)\n\nexport default new Vuetify({\n  icons: {\n    iconfont: 'fa'\n  }\n\n})\n","import 'reflect-metadata' // Import only once\nimport Vue from 'vue'\nimport App from './App.vue'\nimport vuetify from './plugins/vuetify'\nimport './ioc'\n\nVue.config.productionTip = false\n\nnew Vue({\n  vuetify,\n  render: h => h(App)\n}).$mount('#app')\n","\ntype NoteName = 'C' | 'C#' | 'D' | 'D#' | 'E' | 'F' | 'F#' | 'G' | 'G#' | 'A' | 'A#' | 'B';\n\nexport interface Note{\n    name: NoteName;\n    octave: number;\n    frequency: number;\n}\n\nexport const Notes:NoteName[] = ['A', 'A#', 'B', 'C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#']\n\nexport interface NoteElement{\n    duration:number\n    note?:Note\n    pause:boolean\n}\n\nexport class Quarter implements NoteElement {\n  constructor (n:Note) {\n    this.note = n\n  }\n    duration = 0.25\n    note:Note\n    pause = false\n}\n\nexport class QuarterPause implements NoteElement {\n    duration = 0.25\n    pause = true\n}\n\nexport const ConstNote:Note = { name: 'B', octave: 0, frequency: 0 }\n\nexport const QuarterRythm = new Quarter(ConstNote)\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpectrumPresenter.vue?vue&type=style&index=0&id=29f230be&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SpectrumPresenter.vue?vue&type=style&index=0&id=29f230be&lang=scss&scoped=true&\"","import { injectable } from 'inversify-props'\n\nexport interface Drawable {\n  draw(ctx:CanvasRenderingContext2D, canvas:HTMLCanvasElement):void;\n}\n\nexport interface DrawToolkit {\n\n    setUp(canvas : HTMLCanvasElement, alpha : number):Panel;\n\n}\n\nexport interface Panel {\n  redraw():void;\n  add(d:Drawable):void;\n  reset():void\n  remove():void;\n}\n\nexport class PanelImpl implements Panel {\n  private elements:Drawable[] = [];\n  private canvas:HTMLCanvasElement;\n\n  constructor (canvas: HTMLCanvasElement) {\n    this.canvas = canvas\n  }\n\n  redraw ():void {\n    const ctx = this.canvas.getContext('2d')\n    if (ctx) {\n      ctx.clearRect(0, 0, this.canvas.width, this.canvas.height)\n      this.elements.forEach(d => d.draw(ctx, this.canvas))\n    }\n  }\n\n  add (d:Drawable):void {\n    this.elements.push(d)\n  }\n\n  remove ():void{\n    this.elements.pop()\n  }\n\n  reset ():void{\n    this.elements = []\n  }\n}\n\n@injectable()\nexport class DrawToolkitImpl implements DrawToolkit {\n  setUp (canvas : HTMLCanvasElement, alpha : number) {\n    const ctx = canvas.getContext('2d')\n    if (ctx) {\n      const dpr = window.devicePixelRatio || 1\n      canvas.width = canvas.offsetWidth * dpr\n      canvas.height = (canvas.offsetHeight) * dpr\n      ctx.scale(dpr, dpr)\n      ctx.globalAlpha = alpha\n      return new PanelImpl(canvas)\n    }\n    throw new Error('Canvas not ready')\n  }\n}\n","import { injectable } from 'inversify-props'\n// @ts-ignore\nimport Worker from 'worker-loader!../../workers/essentia'\nimport { EssentiaMessage } from '@/workers/essentia-message'\n\nexport interface FFT{\n  of(data:Float32Array):Promise<FFTResponse>;\n}\n\nexport interface FFTResponse{\n  full:number[];\n  subsampled:number[];\n}\n\n@injectable()\nexport class FFTEssentia implements FFT {\n  of (data:Float32Array):Promise<FFTResponse> {\n    return new Promise((resolve, reject) => {\n      const worker = new Worker()\n      let msg:EssentiaMessage = new EssentiaMessage(EssentiaMessage.SPECTRUM, Array.from(data))\n      worker.postMessage(msg)\n      worker.onmessage = (event:MessageEvent) => {\n        if (msg.isForMe(event.data)) {\n          resolve(event.data.payload)\n        }\n      }\n    })\n  }\n}\n","import { injectable } from 'inversify-props'\n\nexport interface AudioContextProvider {\n    context():AudioContext;\n}\n\n@injectable()\nexport class AudioContextProviderImpl implements AudioContextProvider {\n    private audioContext = new AudioContext({\n      sampleRate: 44100\n    });\n\n    context (): AudioContext {\n      return this.audioContext\n    }\n}\n","import { injectable } from 'inversify-props'\nimport { Note, Notes } from '@/model/note'\n\nexport interface NoteWeigth{\n  note:Note\n  magnitude: number\n}\n\nexport interface NoteFrequencyProvider {\n    allNotes():Note[];\n    freqToNote(f:number):String;\n}\n\n@injectable()\nexport class NoteFrequencyProviderImpl implements NoteFrequencyProvider {\n  private f0 = 440;\n  private NOTE = ['A', 'A#', 'B', 'C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#']\n\n  private minNote = -60 // correspond to 13.75 Hz\n  private maxNote = 65 // 19 ~kHz\n\n  private noteFrequency (step:number):number {\n    return this.f0 * Math.pow(2, step / 12)\n  }\n\n  freqToNote (freq:number):String {\n    let deltacents = Math.floor(1200 * Math.log(freq / this.f0) / Math.log(2)) // cents formula\n    let deltanote = Math.floor(deltacents / 100) // 100 cents = 1 semitone\n    if (deltanote % 100 > 50) { deltanote++ }\n\n    let note = deltanote + 48 // count semitones starting from c0 - 16.35Hz\n    let octave = Math.ceil(note / 12)\n\n    let idx = (note + 1) % 12\n    return (this.NOTE[idx] + octave.toString())\n  }\n\n  allNotes () {\n    let notes:Note[] = []\n    for (let n = this.minNote; n < this.maxNote; n++) {\n      notes.push({\n        frequency: this.noteFrequency(n),\n        octave: Math.floor((n - 3) / 12) + 5,\n        name: Notes[(12 * 10 + n) % 12]\n      })\n    }\n    return notes\n  }\n}\n","import { SpectralExtractor } from '@/services/spectral-extractor/spectral-extractor'\nimport { DummySpectralExtractor } from '@/services/spectral-extractor/spectral-extractor-impl'\nimport { REGISTRY } from './registry'\nimport { container } from 'inversify-props'\nimport { AudioContextProviderImpl, AudioContextProvider } from '@/services/providers/context-provider'\nimport { SampleLoaderService } from '@/services/sample-loader/sample-loader'\nimport { SampleLoaderImpl } from '@/services/sample-loader/sample-loader-impl'\nimport { StoreImpl, Store, PreLoadedStore } from '@/services/store/store'\nimport { TimeExtractor } from '@/services/time-extractor/time-extractor'\nimport { DummyTimeExtractor } from '@/services/time-extractor/dummy-time-extractor'\nimport { DrawToolkit, DrawToolkitImpl } from '@/services/providers/draw-toolkit'\nimport { NoteFrequencyProvider, NoteFrequencyProviderImpl } from '@/services/providers/note-frequency'\nimport { Quantizer, QuantizerImpl } from '@/services/providers/quantizer'\nimport { FFTEssentia } from '@/services/providers/fft'\nimport { EssentiaTimeExtractor } from '@/services/time-extractor/essentia-time-extractor'\nimport { EssentiaSpectralExtractor } from '@/services/spectral-extractor/essentia-spectral-extractor'\n\nexport default function () {\n  container.addSingleton<SpectralExtractor>(EssentiaSpectralExtractor, REGISTRY.SpectralExtractor)\n  container.addSingleton<TimeExtractor>(EssentiaTimeExtractor, REGISTRY.TimeExtractor)\n  container.addSingleton<AudioContextProvider>(AudioContextProviderImpl, REGISTRY.AudioContextProvider)\n  container.addSingleton<NoteFrequencyProvider>(NoteFrequencyProviderImpl, REGISTRY.NoteFrequencyProvider)\n  container.addSingleton<SampleLoaderService>(SampleLoaderImpl, REGISTRY.SampleLoader)\n  container.addSingleton<Store>(PreLoadedStore, REGISTRY.Store)\n  container.addSingleton<DrawToolkit>(DrawToolkitImpl, REGISTRY.DrawToolkit)\n  container.addSingleton<Quantizer>(QuantizerImpl, REGISTRY.Quantizer)\n  container.addSingleton<FFTEssentia>(FFTEssentia, REGISTRY.FFT)\n};\n"],"sourceRoot":""}